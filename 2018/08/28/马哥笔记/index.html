<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222">






  
  
    
    
  <script src="/lib/pace/pace.min.js?v=1.0.2"></script>
  <link href="/lib/pace/pace-theme-center-atom
Canvas-nest.min.css?v=1.0.2" rel="stylesheet">







<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />






















<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=6.4.0" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=6.4.0">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=6.4.0">


  <link rel="mask-icon" href="/images/logo.svg?v=6.4.0" color="#222">









<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '6.4.0',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  



<script src="//cdn.bootcss.com/pace/1.0.2/pace.min.js"></script>
<link href="//cdn.bootcss.com/pace/1.0.2/themes/pink/pace-theme-flash.css" rel="stylesheet">
<style>
    .pace .pace-progress {
        background: #1E92FB; /*进度条颜色*/
        height: 2px;
    }
    .pace .pace-progress-inner {
         box-shadow: 0 0 10px #1E92FB, 0 0 5px     #1E92FB; /*阴影颜色*/
    }
    .pace .pace-activity {
        border-top-color: #1E92FB;    /*上边框颜色*/
        border-left-color: #1E92FB;    /*左边框颜色*/
    }
</style>


  <script>
  (function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/0f81ff2f.js","daovoice")
  daovoice('init', {
      app_id: "ddf2b567"
    });
  daovoice('update');
  </script>


<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误！');
                history.back();
            }
        }
    })();
</script>
  <meta name="description" content="linux 培训的笔记">
<meta name="keywords" content="command">
<meta property="og:type" content="article">
<meta property="og:title" content="one">
<meta property="og:url" content="http://yoursite.com/2018/08/28/马哥笔记/index.html">
<meta property="og:site_name" content="Tiger-ghost">
<meta property="og:description" content="linux 培训的笔记">
<meta property="og:locale" content="en">
<meta property="og:image" content="https://s2.ax1x.com/2019/03/23/AGyo9S.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/04/03/AcrCrj.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/04/14/AXGFYD.png">
<meta property="og:image" content="http://yoursite.com/2018/08/28/马哥笔记/find查找条件非或图.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/05/03/ENOeun.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/05/03/ENOnH0.png">
<meta property="og:image" content="https://s2.ax1x.com/2019/05/04/EauSmR.png">
<meta property="og:updated_time" content="2019-06-25T09:42:46.080Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="one">
<meta name="twitter:description" content="linux 培训的笔记">
<meta name="twitter:image" content="https://s2.ax1x.com/2019/03/23/AGyo9S.png">



  <link rel="alternate" href="/atom.xml" title="Tiger-ghost" type="application/atom+xml" />




  <link rel="canonical" href="http://yoursite.com/2018/08/28/马哥笔记/"/>



<script type="text/javascript" id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>one | Tiger-ghost</title>
  









  <noscript>
  <style type="text/css">
    .use-motion .motion-element,
    .use-motion .brand,
    .use-motion .menu-item,
    .sidebar-inner,
    .use-motion .post-block,
    .use-motion .pagination,
    .use-motion .comments,
    .use-motion .post-header,
    .use-motion .post-body,
    .use-motion .collection-title { opacity: initial; }

    .use-motion .logo,
    .use-motion .site-title,
    .use-motion .site-subtitle {
      opacity: initial;
      top: initial;
    }

    .use-motion {
      .logo-line-before i { left: initial; }
      .logo-line-after i { right: initial; }
    }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>
    <a href="https://github.com/Tiger-ghost" class="github-corner" aria-label="View source on Github"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#151513; color:#fff; position: absolute; top: 0; border: 0; left: 0; transform: scale(-1, 1);" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style></a>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Tiger-ghost</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">This is a memory</p>
      
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">
    <a href="/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-home"></i> <br />Home</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-about">
    <a href="/about/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-user"></i> <br />About</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">
    <a href="/tags/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />Tags</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">
    <a href="/categories/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-th"></i> <br />Categories</a>
  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">
    <a href="/archives/" rel="section">
      <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />Archives</a>
  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br />Search</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off"
             placeholder="Searching..." spellcheck="false"
             type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/08/28/马哥笔记/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="panxiaohu">
      <meta itemprop="description" content="I love you">
      <meta itemprop="image" content="/../images/head-portrait.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Tiger-ghost">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">one
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2018-08-28 17:28:03" itemprop="dateCreated datePublished" datetime="2018-08-28T17:28:03+08:00">2018-08-28</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2019-06-25 17:42:46" itemprop="dateModified" datetime="2019-06-25T17:42:46+08:00">2019-06-25</time>
              
            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a></span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <span class="post-meta-item-icon">
                  <i class="fa fa-comment-o"></i>
                </span>
                <a href="/2018/08/28/马哥笔记/#comments" itemprop="discussionUrl">
                  <span class="post-meta-item-text">Comments: </span> <span class="post-comments-count valine-comment-count" data-xid="/2018/08/28/马哥笔记/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="post-meta-item-icon"
            >
            <i class="fa fa-eye"></i>
             Views:  
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>
            </span>
          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

  

      
      

      
        <p><center><font face="FZShuTi">linux 培训的笔记 </font></center><br><a id="more"></a></p>
<h1 id="命令积累"><a href="#命令积累" class="headerlink" title="命令积累"></a>命令积累</h1><p><code>lscpu 查看cpu信息</code>     <code>lsblk （列出块设备）命令用于列出所有可用块设备的信息</code><br><code>sosreport 收集日志</code>　　<code>查看内存：cat /proc/meminfo</code><br><code>partorobe 新分区不用重启的识别命令。刷新硬盘分区表 centos7</code><br><code>partx -a centos6 -a对于增加硬盘的选项</code><br><code>partx -d --nr 6 /dev/sda 对于删除分区后，刷新硬盘的选项</code><br>centos7查看服务是否开机启动:<code>systemctl is-enabled sshd</code><br>查看指定服务的状态: <code>systemctl status sshd</code></p>
<p>用户的UID大于500的都是非系统账号，500以下的都为系统保留的账号</p>
<h1 id="进制转换"><a href="#进制转换" class="headerlink" title="进制转换"></a>进制转换</h1><pre><code>0    0
1    1
10    2
    11    3
100    4
    101    5
    110 6
    111 7
1000 8(2^3)
10000 16(2^4)
100000    32(2^5)
1000000    64(2^6)
10000000 128(2^7)
</code></pre><p>2^0=1 2^1=2 2^2=4 2^3=8 16 32 64 128<br>例：97(十进制)=64+32+1=1000000+100000+1=1100001。<br>例：10101010(二进制)=128+32+8+2=170。<br>1Gbps：每秒传输1g的位。1Gbit/second<br>1Byte=8bit</p>
<h1 id="touch"><a href="#touch" class="headerlink" title="touch"></a>touch</h1><p>建立带-的文件:<br>touch -- -a<br>touch ./-b</p>
<h1 id="DAS-NAS-SAM"><a href="#DAS-NAS-SAM" class="headerlink" title="DAS NAS SAM"></a>DAS NAS SAM</h1><p>　　　　　　　　　　　　　存储基础知识—存储网络</p>
<table>
<thead>
<tr>
<th></th>
<th style="text-align:center">DAS</th>
<th>NAS</th>
<th>SAM</th>
</tr>
</thead>
<tbody>
<tr>
<td>传输类型</td>
<td style="text-align:center">SCSI、FC</td>
<td>IP</td>
<td>IP、FC、SAS</td>
</tr>
<tr>
<td>数据类型</td>
<td style="text-align:center">数据块</td>
<td>文件</td>
<td>数据块</td>
</tr>
<tr>
<td>典型应用</td>
<td style="text-align:center">任何</td>
<td>文件服务器</td>
<td>数据库应用</td>
</tr>
<tr>
<td>优点</td>
<td style="text-align:center">磁盘与服务器分离，便于统一管理</td>
<td>不占用应用服务器资源</td>
<td>高扩展性，高可用性，数据集中，易管理</td>
</tr>
<tr>
<td>缺点</td>
<td style="text-align:center">连接距离短，数据分散，共享困难，存储空间利用率不高，扩展性有限</td>
<td>不适合存储大量的块级应用，数据备份已恢复占用网络带宽</td>
<td>相比NAS成本较高，安装和升级比NAS复杂</td>
</tr>
</tbody>
</table>
<h1 id="分区"><a href="#分区" class="headerlink" title="分区"></a>分区</h1><p>分区分配一个目录名mount point,名为挂载<br>分区：MBR,GPT<br>主：一个硬盘最多有四个，只有一个是活动，1-4<br>扩展：最多一个，划分更小的分区，扩展+主分区&lt;=4 1-4<br>逻辑分区：5,6  </p>
<h1 id="运行模式："><a href="#运行模式：" class="headerlink" title="运行模式："></a>运行模式：</h1><p><code>runlevel</code><br><code>3 5</code>.3表示前一次的运行级别，5表示现在的运行级别<br>N:表示前一次没有运行级别 。<br>init 3：切换到3级别，init要登录<br>startx:切换到？级别，startx不需要登录<br>5：字符界面  0：关机  6：重启  </p>
<h1 id="终端"><a href="#终端" class="headerlink" title="终端"></a>终端</h1><p><code>tty</code>显示终端号<br>chvt 2:表示ctrl+Alt+F2切换到的界面 </p>
<h1 id="centos7启动网络"><a href="#centos7启动网络" class="headerlink" title="centos7启动网络"></a>centos7启动网络</h1><p>启动网络：<code>nmcli connection modify ens33 connection.autoconnect yes</code><br>id -u:当前用户的UID，root为0，非0为普通用户。</p>
<h1 id="查看版本号"><a href="#查看版本号" class="headerlink" title="查看版本号"></a>查看版本号</h1><p><code>cat /etc/centos-release</code>  <code>lsb_release -a</code></p>
<h1 id="命令提示符"><a href="#命令提示符" class="headerlink" title="命令提示符"></a>命令提示符</h1><p>查看：<code>echo $PS1</code><br>更改：<code>PS1=&quot;\[\e[1;33m\][\u@\h \w \!]\\$\[\e[0m\]&quot;</code><br>命令提示符:prompt <font color="red"><br>#</font> :管理员 <font color="red"><br>$</font> :普通用户<br>显示提示符格式：<code>echo $PS1</code><br>修改提示符格式：<code>PS1=&quot;\e[1;33m\[[\u@\h \W]\\$\\e[0m&quot;</code><br><code>PS1=&#39;\e[1;33m[\u@\h \w]\$ &#39;</code> <font color="red"><br>\e \033</font>　<font color="red"> \u</font> 当前用户  <font color="red"><br>\h </font>主机名称　<font color="red"> \H</font> 主机名   　　<font color="red"><br>\w</font> 当前工作目录　<font color="red">\W</font> 当前工作目录最后目录名     <font color="red"><br>\t</font> 24小时时间格式　<font color="red">\T</font> 12小时时间格式  <font color="red"><br>\！</font>命令历史数　 　　<font color="red">\#</font> 开机后命令历史数<br><code>cat ~/.bashrc</code> 命令提示符当前用户修改路径<br><code>echo -e &quot;\033[5;41;33m文字文字\033[0m&quot;</code> 闪烁+颜色</p>
<h1 id="虚拟机取消密码进入"><a href="#虚拟机取消密码进入" class="headerlink" title="虚拟机取消密码进入"></a>虚拟机取消密码进入</h1><pre><code>vim /etc/gdm/custom.conf    
AutomaticLoginEnable=true  
AutomaticLogin=root  
</code></pre><h1 id="查看命令类型"><a href="#查看命令类型" class="headerlink" title="查看命令类型"></a>查看命令类型</h1><p><code>type pwd</code>:显示命令的类型外部命令或者内部命令 <font color="red"><br>-a </font>:显示所有的内部命令后外部命令的列表<br><img src="https://s2.ax1x.com/2019/03/23/AGyo9S.png" alt=""></p>
<p><table><tr><td style="background-image:url(https://s2.ax1x.com/2019/04/28/EQWP0S.gif);"><font color="#F0FFFF"><font face="KaiTi"><font size="5">执行命令<br>输入命令后回车:提请shell程序找到键入命令所对应的可执行程序或代码，并由其分析后提交给内核分配资源将其运行起来。<br>在shell中可执行的命令有两类<br>1.内部命令：由shell自带的，而且通过某种命令形式提供　　<br>help内部命令列表<br>enable cmd 启动内部命令<br>enable -n cmd 禁用内部命令<br>enable -n 查看所有禁用的内部命令<br>2.外部命令：在文件系统路径下有对应的可执行程序文件<br>查看路径：which -a |–skip-alias; whereis<br>3.区别指定的命令是内部或外部命令<br>type COMMAND<br>whereis:查看外部命令路径和他的配置文件文档路径<br></font></font></font></td></tr></table></p>
<h1 id="命令执行路径"><a href="#命令执行路径" class="headerlink" title="命令执行路径"></a>命令执行路径</h1><p><font color="red">alias –内部 –hash表(记录外部命令的路劲) –$PATH –命令找不到 </font><br>Hash缓存表    <table><tr><td bgcolor="#FF8DC"><font size="4">系统初始hash表为空，当外部命令执行时，默认会从PATH路径下寻找该命令，找到后会将这条命令的路径记录到hash表中，当再次使用该命令时，shell解释器首先会查看hash表，存在将执行之，如果不存在，将会去PATH路径下寻找，利用hash缓存表可大大提高命令的调用率。</font></td></tr></table> hash常见用法 <font color="red">　hash</font> 显示hash缓存    <font color="red">　<br>hash -l</font> 显示hash缓存，可作为输入使用  <font color="red">　<br>hash -p path name</font> 将命令全路径path起别名为name  <font color="red">　<br>hash -t name</font> 打印缓存中name的路径  <font color="red">　<br>hash -d name</font> 清除name缓存  <font color="red">　<br>hash -r</font> 清除缓存</p>
<h1 id="别名"><a href="#别名" class="headerlink" title="别名"></a>别名</h1><p><table><tr><td bgcolor="20b2aa"><font size="4">显示当前shell进程所有可用的命令别名<br><code>alias</code><br>定义别名NAME，其相当于执行命令VALUE<br><code>alias NAME=&#39;VALUE&#39;</code><br>在命令行中定义的别名，仅对当前shell进程有效<br>如果想要永久有效，要定义在配置文件中<br>　仅对当前用户：<font color="blue"> ~/.bashrc </font>　<br>　对所有用户有效：<font color="blue"> /etc/bashrc </font>　　<br>写入文件后，文件存储在磁盘上没有生效，必须让他在内存中才会生效，使用命令<code>source.bashrc</code><br>删除别名<font color="red">(指在内存中删除)</font>：<code>unalias 别名</code><br>编辑配置给出的新配置不会立即生效<br>bash进程重新读取配置文件</font></td></tr></table>.</p>
<pre><code>source /path/to/config_file
./path/to/config_file
</code></pre><p>撤销别名: unalias [name]  <font color="red"><br>-a</font>取消所有别名<br>如果别名同原命令同名，如果要执行原命令，可使用</p>
<pre><code>\ALIASNAME
&quot;ALIASNAME&quot;
&#39;ALIASNAME&#39;
command ALIASNAME
/path/command 针对外部命令
</code></pre><p>.</p>
<h1 id="日期和时间"><a href="#日期和时间" class="headerlink" title="日期和时间"></a>日期和时间</h1><p>linux的两种时钟<br>系统时钟：由Linu内核通过CPU的工作频率进行的<br>硬件时钟：主板<br>相关命令:<br>date 显示和设置系统时间<br>　<code>date +%s</code><br>　date -d @1509536033<br>hwclock,clock:显示硬件时钟<br>-s,–hctosys 以硬件时钟为准，校正系统时钟<br>-w,–systohc 以系统时钟为准，校正硬件时钟<br>时区：/etc/localtime<br>显示日历：<code>cal</code></p>
<p><font color="red"><br>显示前一天的时间 <code>date -d &#39;-1 day&#39; +%F-%H</code><br>显示两天前的时间 <code>date -d &#39;-2 days ago&#39;</code><br>显示3月零1天以后的时间 <code>date -d &#39;3 months 1 days&#39;</code><br>显示12月25日在当年的哪一天 <code>date -d &#39;25 Dec&#39; +%j</code></font>.<br>月日小时分年.秒 <code>date 061816432019.00</code></p>
<h1 id="whoami"><a href="#whoami" class="headerlink" title="whoami"></a>whoami</h1><p><table><tr><td style="background-image:url(https://s2.ax1x.com/2019/04/20/E9zkw9.jpg)"><font color="#F0FFFF"><font face="微软雅黑"><li class="b">用户登录信息查看命令:<br><code>whoami</code> :显示当前登录有效用户<br><code>who</code> :系统当前所有的登录会话<br><code>w</code> :系统当前所有的登录会话及所做的操作<br></li></font></font></td></tr></table>.</p>
<h1 id="远程协助：screen"><a href="#远程协助：screen" class="headerlink" title="远程协助：screen"></a>远程协助：screen</h1><p><font size="5">  <li class="g">screen 命令：</li><li class="while">创建新screen会话</li><li class="while">　　<font color="red">screen -S [SESSION]</font></li><li class="while">加入screen会话</li><li class="while">　　<font color="red">screen -x [SESSION]</font></li><li class="while">退出并关闭screen会话</li><li class="while">　　<font color="red">exit</font></li><li class="while">剥离当前screen会话</li><li class="while">　　<font color="red">Ctrl+a,d</font></li><li class="while">显示所有已经打开的screen会话</li><li class="while">　　<font color="red">screen -ls</font></li><li class="while">恢复screen会话</li><li class="while">　　<font color="red">screen -r [SESSION]</font>.</li></font></p>
<h1 id="echo"><a href="#echo" class="headerlink" title="echo"></a>echo</h1><p><table><tr><td bgcolor="ff66cc"><font size="4">linux中换行表示：移动到下一行</font></td></tr></table><table><tr><td bgcolor="ff66cc"><font size="4">回车：光标移动到行首</font></td></tr></table>说明：echo会将输入的字符送往输出。输出的字符串间以空白字符隔开，并在最后加上换行号。<font color="red"><br>-E :(默认)不支持\解释功能</font>  <font color="red"><br>-n :不自动换行  </font><font color="red"><br>-e :启用\字符的解释功能</font> <li class="a">显示变量：<br><code>echo &quot;$VAR_NAME&quot;</code> 变量会替换，弱引用  单双引号的区别<br><code>echo &#39;$VAR_NAME&#39;</code><br> 变量会替换，强引用反引号里面可执行命令（可用$(命令)代替）<font color="red"><font size="6">``</font> <font color="blue"><br> ls -l `echo $SHELL` 得到的是/bin/bash 文件的详细信息</font></font></li></p>
<p><table><tr><td bgcolor="#778899"> <font color="black">  启用命令选项：-e,若字符串中出现以下字符，则特别加以处理，而不会将他当成一般文字输出<br>\a :发出警告声<br>\b :退格键<br>\c :最后不加上换行符号<br>\n :换行且光标移动至行首<br>\r :回车，即光标移动至行首，但不换行<br>\t :插入Tab字符<br>\ :插入\字符<br>\0nnn :插入nnn(八进制)所代表的ASCII字符<br> <code>echo -e &#39;\033[43;31;5mmagedu\033[0m&#39;</code><br>\xHH插入HH(十六进制)所代表的ASCII数字(man 7 ascii)</font></td></tr></table></p>
<h1 id="hexdump"><a href="#hexdump" class="headerlink" title="hexdump"></a>hexdump</h1><p>查看”二进制”文件的十六进制编码</p>
<pre><code>    [root@centos7localdomain ~]# hexdump -C a
    00000000  31 0a                                             |1. |
    00000002
    [root@centos7localdomain ~]# hexdump -C a
    00000000  31 32 0a 33 0a 61 0a                              |12.3.a. | 
    00000007
</code></pre><p>查看文件a的十六进制和ASCII码。<br>偏移量；十六进制；ASCII码；　　　　原始数据 （最后有空格）<br>文件原始数据每行一个数。</p>
<h1 id="Centos7设置语言"><a href="#Centos7设置语言" class="headerlink" title="Centos7设置语言"></a>Centos7设置语言</h1><p>localectl list-locales查看语言列表<br>localectl set-locale LANG=en_US.utf8 修改<br>修改后要注销再登录<br><code>cat /etc/locale.conf</code></p>
<h1 id="符号"><a href="#符号" class="headerlink" title="符号"></a>符号</h1><p>命令行扩展，被括起来的集合<li class="d">命令行扩展: $()或``<br>把一个命令的输出打印给另一个命令的参数</li></p>
<pre><code>echo &quot;This system&#39;s name is $(hostname)&quot;
This system&#39;s name is server1.example.com  
echo &quot;i am `whoami`&quot;
i am root
</code></pre><p><li class="d">括号扩展:{}<br>打印重复字符串的简化形式<font color="blue"><br>echo file{1,3,5} 结果为: file1 file3 file5<br>rm -fr file{1,3,5}<br>echo {1..10}<br>echo {a..z}</font>.</li></p>
<h1 id="whatis"><a href="#whatis" class="headerlink" title="whatis"></a>whatis</h1><p>centos6生成whatis数据库:<code>makewhatis</code><br>Centos7: <code>mandb</code><br>whatis:<br>显示命令的简短叙述;<br>使用数据库;<br>刚安装后不可立即使用<br>makewhatis | mandb 制作数据库<br>使用示例: <code>whatis cal 或 man -f cal</code></p>
<h1 id="history"><a href="#history" class="headerlink" title="history"></a>history</h1><p><table><tr><td bgcolor="778899"><font size="4"> 重复前一个命令使用上方向键，并且执行<br>　按!!并回车执行<br>　输入!-1执行倒数第一个命令<br>　按Ctrl+p 并回车执行<br>!:0 执行前一条命令(去除参数)<br>Ctrl+n 显示当前历史中的下一条命令，但不执行<br>Ctrl+j 执行当前密令<br>!n 执行history命令输出对应序号n的命令<br>!-n 执行history历史中倒数的第n个命令</font></td></tr></table><table><tr><td bgcolor="778899"><font size="4">!string 重复前一个以”string”开头的命令<br>!?string 重复前一个包含string的命令<br>!string:p 仅打印命令历史，而不执行<br>!$:p 打印输出!$(上一条命令的最后一个参数)的内容<br>!*:p 打印输出!*(上一条命令的所有参数)的内容<br>^string 删除上一条命令中的第一个string<br>^string1^string2 将上一条命令中的第一个string1替换为string2<br>!:g/s/string/string2 将上一条命令中所有的string1都替换为string2</font></td></tr></table> <table><tr><td bgcolor="778899"><font size="4">3. 使用up(向上)和down(向下)键上下浏览从前输入的命令<br>ctrl+r 在历史命令中搜索<br>ctrl+g 从历史搜索模式中退出<br>要重新调用前一个命令中最后一个参数：<br>!$<br>ESC,.(点击ESC键后松开，然后点击.键)<br>Alt+. (按住Alt键的同时点击.键) </font></td></tr></table> <table><tr><td bgcolor="778899"><font size="4">4. command !^ 利用上一个命令的第一个参数做cmd的参数.<br>command !$ 利用上一个命令的最后一个参数做cmd的参数<br>command !* 利用上一个命令的全部参数做cmd的参数<br>command !:n 利用上一个命令的第n个参数做cmd的参数<br>command !n:m 调用第n条命令的第m个参数<br>command !n:* 调用第n条命令的所有参数</font></td></tr></table> <font color="red">-c </font>:清空命令历史 <font color="red"><br>-d offser </font>:删除历史中指定的第offser个命令 <font color="red"><br>n </font>:显示最近的n条历史 <font color="red"><br>-a </font>:追加本次会话新执行的命令历史列表至历史文件 <font color="red"><br>-r </font>:读历史文件附加到历史列表 <font color="red"><br>-w </font>:保存历史列表到指定的历史文件 <font color="red"><br>-n </font>:读取历史文件中未读过的行到历史列表 <font color="red"><br>-p </font>:展开历史参数成多行，但不存在历史列表中 <font color="red"><br>-s </font>:展开参数成一行，附加在历史列表后 <font color="ff73b3"><br>-p:可以执行命令但不存在历史记录中。<br>-s:伪造历史，不执行命令。<br><code>HISTTIMEFORMAT=&quot;%F %T &quot;</code>历史加上时间</font>. <table><tr><td bgcolor="1e90ff"><font size="4">5.命令历史相关环境变量 <li class="h">HISTSIZE :命令历史记录的条数</li><li class="h">HISTFILE :指定历史文件，默认为~/.bash_history </li><li class="h">HISTFILESIZE :命令历史文件记录历史的条数 </li><li class="h">HISTTIMEFORMAT= “%F %T” 显示时间  </li><li class="h">HISTIGNORE= “str1:str2*……” 忽略str1命令，str2开头的历史 </li><li class="h">控制命令历史的记录方式：<br>　环境变量：HISTCONTROL<br>　　ignoredups 默认，忽略重复的命令，连续且相同为”重复”<br>　　ignorespace 忽略所有已空白开头的命令<br>　　ignoreboth 相当于ignoredups,ignorespace的组合<br>　　erasedups 删除重复命令<br>export 变量名=”值”<br>存放在 /etc/profile 或 ~/.bash_profile</li></font></td></tr></table>.</p>
<h1 id="man"><a href="#man" class="headerlink" title="man"></a>man</h1><p>查看man手册页<br>　　man [章节] keyword<br>列出所有帮助<br>　　man -a keyword<br>搜索man手册<br>　　man -k keyword 列出所有匹配的页面<br>相当于whatis 数据库<br>　　man -f keyword<br>打印man帮助文件的路径<br>　　man -w [章节] keyword</p>
<h2 id="man-命令的操作方法：使用less-命令实现"><a href="#man-命令的操作方法：使用less-命令实现" class="headerlink" title="man 命令的操作方法：使用less 命令实现"></a>man 命令的操作方法：使用less 命令实现</h2><p>待续写</p>
<h2 id="man搜索"><a href="#man搜索" class="headerlink" title="man搜索"></a>man搜索</h2><p>待续写</p>
<h1 id="bash-的快捷键"><a href="#bash-的快捷键" class="headerlink" title="bash 的快捷键"></a>bash 的快捷键</h1><p>Ctrl + l    清屏，相当于clear命令<br>Ctrl + o   执行当前命令，并重新显示本命令<br>Ctrl + s   阻止屏幕输出，锁定<br>Ctrl + q   允许屏幕输出<br>Ctrl + c   终止命令<br>Ctrl + z   挂起命令</p>
<h1 id="基名，目录名"><a href="#基名，目录名" class="headerlink" title="基名，目录名"></a>基名，目录名</h1><p><code>basename</code> :取文件基名<br><code>dirname</code> :取文件目录名</p>
<h1 id="centos6自动挂载"><a href="#centos6自动挂载" class="headerlink" title="centos6自动挂载"></a>centos6自动挂载</h1><p><code>cd /misc/cd</code> 目录磁盘会自动挂载</p>
<h1 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h1><p><code>*</code> 匹配零个或多个字符<br><code>?</code> 匹配任何单个字符<br><code>~</code> 当前用户家目录 <code>~mage</code> 用户mage家目录<br><code>~+</code> 当前工作目录<br><code>~-</code> 前一个工作目录<br><code>[0-9]</code> 匹配数字范围 <code>[a-z]</code>:字母　　<code>[A-Z]</code>:字母　　<code>[wang]</code>匹配列表中的任何的一个字符<br><code>[^wang]</code> 匹配列表中的所有字符以外的字符<br><code>ls 1[a-z].txt</code>:不会显示出小写字母到大写字母的文件，他会以小写大写的顺序排列出来<br>预定义的字符类：man 7 glob <div class="alert alert-success"><i class=""></i>[:digit:] :任意数字，相当于0-9<br>[:lower:] :任意小写字母<br>[:upper:] :任意大写字母<br>[:alpha:] :任意大小写字母<br>[:alnum:] :任意数字或字母<br>[:blank:] :水平空白字符<br>[:space:] :水平或垂直空白字符<br>[:punct:] :标点符号<br>[:print:] :可打印字符<br>[:cntrl:] :控制(非打印)字符<br>[:graph:] :图形字符<br>[:xdigit:] :十六进制字符</div><br><code>ls .[^.]*</code>显示当前目录下的隐藏目录<br><code>ls -d .*</code><br><code>ls -l &quot;[^.]*&quot; -a</code>　　三种显示方式</p>
<h1 id="atime-mtime-ctime"><a href="#atime-mtime-ctime" class="headerlink" title="atime mtime ctime"></a>atime mtime ctime</h1><p>touch命令<br>-a 仅改变 atime和ctime<br>-m 仅改变 mtime和ctime<br>-t [[CC]YY]MMDDhhmm[.ss] <code>touch -t 201802062036.18 linuxidc.txt</code><br>　指定atime和mtime的时间戳<br>-c 如果文件不存在，则不予创建, 如果文件存在，touch将更新访问时间</p>
<h1 id="cp"><a href="#cp" class="headerlink" title="cp"></a>cp</h1><p><code>cp -r</code>递归<br><code>cp /etc/passwd ./a --backup</code>将文件cp到a文件夹并备份<br>-d:保留链接属性<br>-a:归档，相当于-d,-p,-r<br>-v:显示复制过程<br>-p:此时cp除复制源文件的内容外，还将把其修改时间和访问权限也复制到新文件中<br>-u:两个同样的文件覆盖时，只复制新的到旧的上去。<br>-f:复制已经存在的目标文时件不提示<br>-i:询问，如果目标文件已经存在，则会询问是否覆盖<br>-l:把目标文件建立为源文件的硬链接文件，而不是复制源文件；<br>-b:覆盖前，目标存在先备份<br><code>cp /etc/passwd ./a1 --backup=numbered</code><br>例：cp -av /etc/ app/back <code>date +%F</code>    :/etc/目录下所有文件，备份到/app独立的子目录下，要求子目录格式为backYYY-mm-dd,备份过程可见。</p>
<h1 id="mv"><a href="#mv" class="headerlink" title="mv"></a>mv</h1><p><fon color="red">-b</fon>: 如果有相同的文件，覆盖前先备份。 <font color="red"><br>-t</font>移动文件路径和目标路径颠倒  <code>alias rm=&#39;mv -t /data&#39;</code></p>
<h1 id="rename"><a href="#rename" class="headerlink" title="rename"></a>rename</h1><p>rename 原字符串  目标字符串  文件(列表)<br>原字符串：将文件名需要替换的字符串；<br>目标字符串：将文件名中含有的原字符替换成目标字符串；<br>文件：指定要改变文件名的文件列表。<br>将main1.c重命名为main.c  <code>rename main1.c main.c main1.c</code><br>rename支持通配符<br><code>?</code>  可替代单个字符<br><code>*</code>  可替代多个字符<br><code>[charset]</code> 可替代charset集中的任意单个字符<br>举例：文件夹中有这些文件foo1, …, foo9, foo10, …, foo278<br><code>rename foo foo0 foo?</code><br>该命令会把foo1到foo9的文件重命名为foo01到foo09，重命名的文件只是有4个字符长度名称的文件，文件名中的foo被替换为foo0。<div class="alert alert-success"><br>rename支持正则表达式<br>现在以一个具体的例子讲解该命令中正则表达式的使用：<br>今天下午我手中的数据（图片）命名是(1).jpg、(2).jpg……到(16720).jpg。<br>现在我想要把文件名改为00001.png、00002.png、…….16720.png<br>第一步：将后缀名.jpg改成.png <code>rename &#39;s/\.jpg$/\.png/&#39; *.jpg</code><br>第二步：讲左括号”(“去掉：<code>rename &#39;s/^\(//&#39; *.png</code><br>第三步，将右括号“）”去掉：<code>rename &#39;s/\)//&#39; *.png</code><br>第四步：将文件名字改成五位数，不足五位数的前面补0即可。创建脚本a.sh完成，脚本内容如下：</div></p>
<pre><code>#！/bin/bash　　　上面三部后的结果：1.png
for i in {1..9}
do 
   mv $i.png  0000$i.png
done
for i in {10..99}
do 
   mv $i.png  000$i.png
done
for i in {100..999}
do 
   mv $i.png  00$i.png
done
for i in {1000..9999}
do 
   mv $i.png  0$i.png
done
</code></pre><p></p>
<p>rename支持正则表达式:<br><code>rename &quot;s/AA/aa/&quot;</code>  //把文件名中的AA替换成aa<br>修改文件的后缀 <code>rename &quot;s//.html//.php/&quot;</code>  //把.html 后缀的改成 .php后缀<br>批量添加文件后缀 <code>rename &quot;s/$//.txt/&quot;</code>  //把所有的文件名都以txt结尾<br>批量删除文件名 <code>rename &quot;s//.txt//&quot;</code>  //把所有以.txt结尾的文件名的.txt删掉<br>如我们想把文件扩展名为.bak 的文件扩展名去掉，可以这样 <code>rename &#39;s/.bak$//&#39; \*.bak</code>*.bak 为通配符(wildcard)，会被shell展开为各个文件名 </p>
<pre><code>    去除文件名中的空格  rename &#39;s/ //g&#39;
    g 是global的意思，替换所有的空格为空字符（也就是删除啦） 
    文件名转为小写:  rename &#39;y/A-Z/a-z/&#39;
</code></pre><h1 id="tree"><a href="#tree" class="headerlink" title="tree"></a>tree</h1><p><i class="fa fa-tree fa-2x"></i>显示目录树 <font color="red"><br> -d</font> :只显示目录 <font color="red"><br> -L level</font> :指定显示的层级数目 <font color="red"><br> -P pattern</font> :只显示由指定pattern匹配到的路径<code>tree -P /etc/rc*</code></p>
<h1 id="mkdir"><a href="#mkdir" class="headerlink" title="mkdir"></a>mkdir</h1><p><i class="fa fa-folder fa-x"></i>创建目录 <font color="red"><br>-p</font> :存在于不报错，且可自动创建所需的各目录 <font color="red"><br>-v</font> :显示详细信息 <font color="red"><br>-m MODE</font> :创建目录时直接指定权限</p>
<h1 id="rmdir"><a href="#rmdir" class="headerlink" title="rmdir"></a>rmdir</h1><p>删除空目录 <font color="red"><br>-p</font> :递归删除父目录(rmdir -p:从下往上删除，从深往浅删除) <font color="red"><br>-v</font> :显示详细信息<br><span id="inline-green">rm -r :递归删除目录树 </span></p>
<div class="alert alert-success"><i class="fa fa-lightbulb-o"></i> 例：<br>1.创建/testdir/dir1/x,/testdir/dir1/y,/testdir/dir1/x/a,/testdir/dir1/x/b,/testdir/dir1/y/a,/testdir/dir1/y/b<br><code>mkdir -p ./testdir/dir1/{x,y}/{a,b}</code><br>2.创建/testdir/dir2/x,/testdir/dir2/y,/testdir/dir2/x/a,testdir/dir2/x/b<br><code>mkdir -p testdir/dir2{x/{a,b},y}</code><br>3.创建/testdir/dir3,/testdir/dir4,/testdir/dir5,/testdir/dir5/dir6,testdir/dir5/dir7<br><code>mkdir -p ./testdir/dir{3,4,5/dir{6,7}}</code><br></div>

<h1 id="inode"><a href="#inode" class="headerlink" title="inode"></a>inode</h1><p>索引节点:inode(index node)表中包含文件系统所有文件列表<br>一个节点(索引节点)是在一个表项，包含有关文件的信息(元数据),包括：<br>　文件类型,权限,UID,GID<br>　链接数(指向这个文件名路径名称个数)<br>　该文件的大小和不同的时间戳<br>　指向磁盘上文件的数据块指针<br>　有关文件的其他数据</p>
<h1 id="硬链接"><a href="#硬链接" class="headerlink" title="硬链接"></a>硬链接</h1><div class="note warning"><p>创建硬链接会增加额外的记录项以引用文件<br>对应于同一文件系统上一个物理文件<br>每个目录引用相同的inode号<br>创建时链接数递增<br>删除文件时：<br>rm命令递减计数的链接<br>文件要存在，至少有一个链接数<br>当链接数为零时，该文件被删除<br>不能跨越驱动器或分区<br>同一个文件的不同名字，改动其中一个文件，另外一个有相同的变化。<br>语法:<code>ln filename</code><br></p></div>

<p>目录不支持硬链接，他前面的数字表示链接的次数是指目录下的隐藏文件夹，.和..</p>
<h2 id="软链接"><a href="#软链接" class="headerlink" title="软链接"></a>软链接</h2><p><div class="note primary"><p>一个符号链接指向另一个文件<br><code>ls -l</code>的 显示链接的名称和引用的文件<br>一个符号链接的内容是它引用文件的名称<br>可以对目录进行<br>可以跨分区<br>指向的是另一个文件的路径；其大小为指向的路径字符串的长度；不增加或减少目标文件inode的引用计数；<br>语法：<code>ln -s filename</code>  </p></div><br>软链接大小是指向的路径大小<br>这里的相对路径: <code>ln -s ../../../data/a.txt /d1/d2/d3/a-link</code> 写法要注意，这里就是我现在在d3要去找到data，那么就是先回到根目录，然后去data目录下。简单说就是我现在在d3目录利用相对路径去找到data。</p>
<h1 id="file"><a href="#file" class="headerlink" title="file"></a>file</h1><p>文件可以包含多种类型的数据。检查文件的类型，然后确定适当的打开命令或应用程序使用<br>file [options] &lt;\filename&gt;… <font color="red"><br>-b</font> 列出文件辨识结果时，不显示文件名称<font color="red"><br>-f</font> filelist 列出文件filelist中文件名的文件类型<font color="red"><br>-F</font> 使用指定分隔符号替换输出文件名后默认的”:”分隔符<font color="red"><br>-L</font> 查看对应软链接对应文件的文件类型</p>
<h1 id="tr"><a href="#tr" class="headerlink" title="tr"></a>tr</h1><p>-c:取反<br>-s:压缩重复字符</p>
<pre><code>[root@centos7 data]# tr &#39;a-z&#39; &#39;A-Z&#39;
dfsjfidshijfidsijifjdisjidishifj
DFSJFIDSHIJFIDSIJIFJDISJIDISHIFJ
jdihsifjdisjfiiehuHIHIJ
JDIHSIFJDISJFIIEHUHIHIJ
[root@centos7 data]#
[root@centos7 data]# tr -t &quot;a-d&quot; &quot;1-3&quot; 　　a-d对应1-3进行替换
fdjfreg
fdjfreg
aaaaaasdfdsadfgh
111111sdfds1dfgh
abcfg
123fg
</code></pre><pre><code>[root@centos7 data]#
[root@centos7 data]# tr -d &#39;0-9&#39;
dsgds546y7ujyr564wef5
dsgdsyujyrwef
[root@centos7 data]#
</code></pre><pre><code>[root@centos7 data]# tr -dc &#39;0-9&#39; 
dsgrere54545tg653r45
5454565345[root@centos7 data]#  
[root@centos7 data]# tr -s &#39;dfg&#39;
ddfsggvffcddd
dfsgvfcd
</code></pre><p><img src="https://s2.ax1x.com/2019/04/03/AcrCrj.png" alt=""></p>
<h1 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h1><p>管理员：root, 0<br>普通用户：1-60000 自动分配<br>系统用户：1-499, 1-999 （CentOS7）<br>对守护进程获取资源进行权限分配登录用户：500+, 1000+（CentOS7）</p>
<h2 id="Linux安全上下文"><a href="#Linux安全上下文" class="headerlink" title="Linux安全上下文"></a>Linux安全上下文</h2><p>运行中的程序：进程 (process) 以进程发起者的身份运行：<br>root: /bin/cat<br>mage: /bin/cat<br>进程所能够访问资源的权限取决于进程的运行者的身份</p>
<h2 id="组"><a href="#组" class="headerlink" title="组"></a>组</h2><p>Linux组：Groupname/GID<br>管理员组：root, 0<br>普通组：<br>　系统组：1-499, 1-999（CENTOS7）<br>　普通组：500+, 1000+（CENTOS7）</p>
<p><div class="alert alert-success"><i class="fa fa-lightbulb-o"></i> Linux组的类别:<br>用户的主要组(primary group)<br>用户必须属于一个且只有一个主组<br>组名同用户名，且仅包含一个用户，私有组<br>用户的附加组(supplementary group)<br>一个用户可以属于零个或多个辅助组</div>.</p>
<h2 id="用户和组的配置文件"><a href="#用户和组的配置文件" class="headerlink" title="用户和组的配置文件"></a>用户和组的配置文件</h2><p><div class="alert alert-danger"><i class="fa fa-bug"></i> Linux用户和组的主要配置文件：<br>/etc/passwd：用户及其属性信息(名称、UID、主组ID等）<br>/etc/group：组及其属性信息<br>/etc/shadow：用户密码及其相关属性<br>/etc/gshadow：组密码及其相关属性 </div>.</p>
<h2 id="passwd-文件格式"><a href="#passwd-文件格式" class="headerlink" title="passwd 文件格式"></a>passwd 文件格式</h2><p>login name：登录用名（wang）<br>passwd：密码 (x)<br>UID：用户身份编号 (1000)<br>GID：登录默认所在组编号 (1000)<br>GECOS：用户全名或注释<br>home directory：用户主目录 (/home/wang)<br>shell：用户默认使用shell (/bin/bash)</p>
<h2 id="shadow文件格式"><a href="#shadow文件格式" class="headerlink" title="shadow文件格式"></a>shadow文件格式</h2><p>登录用名<br>用户密码:一般用sha512加密<br>从1970年1月1日起到密码最近一次被更改的时间<br>密码再过几天可以被变更（0表示随时可被变更）<br>密码再过几天必须被变更（99999表示永不过期）<br>密码过期前几天系统提醒用户（默认为一周）<br>密码过期几天后帐号会被锁定<br>从1970年1月1日算起，多少天后帐号失效</p>
<h2 id="例"><a href="#例" class="headerlink" title="例"></a>例</h2><pre><code>groupmems -a p2 -g p1:将用户p2加入p1组   
groupmems -d p2 -g p1:将用户p2从p1组删除   
[root@centos7 ~]# getent group p1  
p1:x:1001:p2  
[root@centos7 ~]# getent group p2  
p2:x:1002:  
[root@centos7 ~]#
newgrp p1：将当前用户的主组临时修改为p1,要求当前用户必须在p1组。
</code></pre><p>vipw == vi /etc/passwd<br>vigr == vi /etc/grow<br>useradd<br>-o:忽略id的唯一性检查<br>-r:建立系统用户，他默认不会创建家目录<br>-s:指定shell类型<br>-c:描述<br>groups x:查看用户x属于那些组<br>-N：不要创建以用户名称为名的群组(默认加组users)<br>新建用户默认属性文件： </p>
<h1 id="id"><a href="#id" class="headerlink" title="id"></a>id</h1><p>-g或–group 　 显示用户所属群组的ID。<br>-G或–groups   显示用户所属附加群组的ID。<br>-n或–name 　  显示用户，所属群组或附加群组的名称。<br>-r或–real 　  显示实际ID。<br>-u或–user 　  显示用户ID。<br>-help 　       显示帮助。<br>-version 　    显示版本信息<br><code>[root@localhost ~]# id</code><br><code>uid=0(root) gid=0(root) groups=0(root),1(bin),2(daemon),3(sys),4(adm),6(disk),10(wheel)</code><br>用户root的UID号码 = 0，GID号码 = 0。用户root是下面组的成员：<br>root组GID号是：0<br>bin组GID号是：1<br>daemon组GID号是：2<br>sys组GID号是：3<br>adm组GID号是：4<br>disk组GID号是：6<br>wheel组GID号是：10</p>
<h1 id="su"><a href="#su" class="headerlink" title="su"></a>su</h1><p>切换用户或以其他用户身份执行命令<br>su [options…] [-] [user [args…]]<br>切换用户的方式：<br>su UserName：非登录式切换，即不会读取目标用户的配置文件，不改变当前工作目录<br>su - UserName：登录式切换，会读取目标用户的配置文件，切换至家目录，完全切换<br>root su至其他用户无须密码；非root用户切换时需要密码<br>换个身份执行命令：<br>su [-] UserName -c ‘COMMAND’<br>选项：-l –login<br>su -l UserName 相当于 su - UserName<br><code>su - pan -c &#39;ls&#39; 到用户pan执行命令ls再退回</code></p>
<h1 id="passwd"><a href="#passwd" class="headerlink" title="passwd"></a>passwd</h1><p><font color="red"><br>-d</font>：删除指定用户密码 <font color="red"><br>-l</font>：锁定指定用户 <font color="red"><br>-u</font>：解锁指定用户 <font color="red"><br>-e</font>：强制用户下次登录修改密码 <font color="red"><br>-f</font>：强制操作 <font color="red"><br>-n</font> mindays：指定最短使用期限 <font color="red"><br>-x</font> maxdays：最大使用期限 <font color="red"><br>-w</font> warndays：提前多少天开始警告 <font color="red"><br>-i</font> inactivedays：非活动期限<br>–stdin：从标准输入接收用户密码<br>echo “PASSWORD” | passwd –stdin USERNAME</p>
<h1 id="chage"><a href="#chage" class="headerlink" title="chage"></a>chage</h1><p>修改用户密码状态chage<br>chage [选项] 用户名   <font color="red"><br>-l</font>:列出用户的详细密码状态  <strong><font color="red"><br>-d 日期:修改密码最后一次更改日期(shadow3字段)</font></strong>  <font color="red"><br>-m 天数</font>:两次密码修改间隔(4字段)  <font color="red"><br>-M 天数</font>:密码有效期(5字段)  <font color="red"><br>-W 天数</font>:密码过期前警告天数(7字段)  <font color="red"><br>-I 天数</font>:密码过后宽限天数(7字段)  <font color="red"><br>-E 日期</font>:账号失效时间(8字段)<br><code>chage -d 0 username</code><center><font size="2">这个命令其实是把密码修改日期归0了(shadow第3字段)，这样用户只要一登录就要修改密码。第三字段是指密码最后一次修改时间的日期。1970年1月1号到现在修改密码的时间戳。如果第3字段改为0，系统会认为用户没有修改过操作密码，那么当此用户一旦登录系统就会提示要修改密码，才可正常使用。</font></center>.</p>
<h1 id="groupmod"><a href="#groupmod" class="headerlink" title="groupmod"></a>groupmod</h1><p>修改和删除组<br>组属性修改：groupmod groupmod [OPTION]… group<br>-n group_name: 新名字<br>-g GID: 新的GID<br>组删除：groupdel<br>groupdel GROUP<br><code>groupmod -n p1(新名字) pan</code><br><code>groupmod -g 1004 p1</code></p>
<h1 id="gpasswd"><a href="#gpasswd" class="headerlink" title="gpasswd"></a>gpasswd</h1><p>更改组密码<br>组密码：gpasswd<br>gpasswd [OPTION] GROUP<br>-a user 将user添加至指定组中<br>-d user 从指定组中移除用户user<br>-A user1,user2,… 设置有管理权限的用户列表<br>newgrp命令：临时切换主组<br>如果用户本不属于此组，则需要组密码</p>
<h1 id="groupmems"><a href="#groupmems" class="headerlink" title="groupmems"></a>groupmems</h1><p>groupmems [options] [action] options：<br>-g, –group groupname 更改为指定组 (只有root) Actions:<br>-a, –add username 指定用户加入组 -d, –delete username 从组中删除用户<br>-p, –purge    从组中清除所有成员<br>-l, –list    显示组成员列表<br>groups [OPTION].[USERNAME]… 查看用户所属组列表</p>
<pre><code>groupmems -g admins -a zhu------将zhu用户添加到admins组中  
groupmems -g admins -l  ------------查看admins组中的用户列表  
groupmems -g admins -d ma-------将ma从admins组中删除  
groupmems -g admins -p------------清空admins组中的所有组成员 
</code></pre><h1 id="umask"><a href="#umask" class="headerlink" title="umask"></a>umask</h1><p>新建文件和目录的默认权限<br>umask值 可以用来保留在创建文件权限<br>　　新建FILE权限: 666-umask<br>如果所得结果某位存在执行（奇数）权限，则将其权限+1<br>　　新建DIR权限: 777-umask<br>　　非特权用户umask是 002<br>　　root的umask 是 022<br>　　umask: 查看<br>　　umask #: 设定<br>umask 002<br>　　umask –S 模式方式显示<br>　　umask –p 输出可被调用<br>　　全局设置： /etc/bashrc<br>　　用户设置：~/.bashrc</p>
<h1 id="SUID-SGID-STICKY"><a href="#SUID-SGID-STICKY" class="headerlink" title="SUID SGID STICKY"></a>SUID SGID STICKY</h1><p>suid:4 作用在二进制可执行的文件上，功能：当用户执行此文件，会继承此文件所有者的权限。<br>sgid:2 作用于二进制可执行的文件上，功能：会执行此文件所属组的权限 。 作用于目录上，功能：当用户在此目录建新文件时，此新文件的所属组继承目录的所属组。<br>stikey:1 作用于目录上，功能：对于目录的文件只能删除自己的文件。</p>
<h1 id="chattr"><a href="#chattr" class="headerlink" title="chattr"></a>chattr</h1><p>chattr +i 不能删除，改名，更改<br>chattr +a 只能追加内容<br>lsattr 显示特定属性</p>
<h1 id="ACL"><a href="#ACL" class="headerlink" title="ACL"></a>ACL</h1><p>访问控制列表<br>ACL：Access Control List，实现灵活的权限管理<br>除了文件的所有者，所属组和其它人，可以对更多的用户设置权限<br>CentOS7 默认创建的xfs和ext4文件系统具有ACL功能<br>CentOS7 之前版本，默认手工创建的ext4文件系统无ACL功能,需手动增加 tune2fs –o acl /dev/sdb1<br>mount –o acl /dev/sdb1  /mnt/test<br>ACL生效顺序：所有者，自定义用户，自定义组，其他人</p>
<p><div class="alert alert-success"><br>setfacl -R -m d:u:p1:rw text   给文件夹text设置acl权限，默认以后文件下创建的文件都会有这个权限<br>(text文件夹下所有的文件夹马上会带有acl权限。)<br>setfacl -b test     #清除所有acl<br>setfacl -x u:tank test    #清除tank用户，对test文件acl规则<br>setfcl -k test 清楚text目录下所有文件的默认acl权限(文件夹除外)<br>赋权给用户： setfacl -m u:USERNAME:MODE file<br>赋权给组： serfacl -m g:GROUPNAME:MODE file<br>[root@centos7 text]# cat a<br>u:p1:rw<br>u:p2:rw<br>setfacl -M a.txt aa   将已编辑好的acl文件a，赋给aa文件。</div><br>设置文件的ACL权限后，会有一个mask权限，他表示所有权限的上限(所有者除外)，其他用户和组的权限都要以他为最大标准。ll查看文件的基础权限组权限就是mask权限，更改组的权限相当更改mask权限。所以文件的组的权限在getfacl里面</p>
<pre><code>[root@centos7 text]# getfacl a

# file: a
# owner: root
# group: root
user::rwx
user:p1:rwx                     #effective:rw- 最大权限rw
group::r--  基础组权限
group:p1:rwx                    #effective:rw-
mask::rw-
other::---
[root@centos7 text]# ll a  
-rwxrw----+ 1 root root 41 Apr  7 12:03 a
</code></pre><p><code>setfacl -m mask::rw 更改mask权限</code> 或者直接chmod更改</p>
<h1 id="cat-head-tail-cut"><a href="#cat-head-tail-cut" class="headerlink" title="cat,head,tail,cut"></a>cat,head,tail,cut</h1><p>文件查看<br>    文件查看命令：<br>cat，tac，rev<br>    cat [OPTION]… [FILE]…<br>-E：显示行结束符$<br>-n：对显示出的每一行进行编号<br>-A：显示所有控制符<br>-b：非空行编号<br>-s：压缩连续的空行成一行<br>    tac<br>    rev</p>
<h2 id="显示文本前或后行内容"><a href="#显示文本前或后行内容" class="headerlink" title="显示文本前或后行内容"></a>显示文本前或后行内容</h2><p>head [OPTION]… [FILE]…<br>-c #: 指定获取前#字节<br>-n #: 指定获取前#行<br>-#： 指定行数<br>    tail [OPTION]… [FILE]…<br>-c #: 指定获取后#字节<br>-n #: 指定获取后#行<br>-#：同上<br>-f: 跟踪显示文件fd新追加的内容,常用日志监控<br>相当于 –follow=descriptor<br>-F: 跟踪文件名，相当于–follow=name –retry<br>    tailf    类似tail –f，当文件不增长时并不访问文件</p>
<h2 id="按列抽取文本cut和合并文件paste"><a href="#按列抽取文本cut和合并文件paste" class="headerlink" title="按列抽取文本cut和合并文件paste"></a>按列抽取文本cut和合并文件paste</h2><p>cut [OPTION]… [FILE]…<br>-d DELIMITER: 指明分隔符，默认tab<br>-f FILEDS:<br>#:                       第 # 个 字 段 #,#[,#]：离散的多个字段，例如1,3,6 #-#：连续的多个字段, 例如1-6<br>混合使用：1-3,7<br>-c    按字符切割<br>–output-delimiter=STRING指定输出分隔符<br><code>cut -d : -f 1,3 --output-delimiter=+ /etc/passwd</code>输出分隔符为’+’</p>
<h1 id="cut和paste"><a href="#cut和paste" class="headerlink" title="cut和paste"></a>cut和paste</h1><p>显示文件或STDIN数据的指定列cut -d: -f1 /etc/passwd<br>cat    /etc/passwd | cut  -d:  -f7 cut -c2-5 /usr/share/dict/words<br>paste 合并两个文件同行号的列到一行<br>paste [OPTION]… [FILE]…<br>-d 分隔符：指定分隔符，默认用TAB<br>-s : 所有行合成一行显示<br>示 例 ： paste f1 f2<br>paste    -s f1 f2</p>
<h1 id="wc"><a href="#wc" class="headerlink" title="wc"></a>wc</h1><p>计数单词总数、行总数、字节总数和字符总数<br>可以对文件或STDIN中的数据运行wc story.txt<br>39    237    1901 story.txt 行数        字数        字节数<br>常用选项<br>-l    只计数行数<br>-w    只计数单词总数<br>-c    只计数字节总数<br>-m    只计数字符总数<br>-L    显示文件中最长行的长度</p>
<h1 id="sort"><a href="#sort" class="headerlink" title="sort"></a>sort</h1><p>文本排序sort<br>把整理过的文本显示在STDOUT，不改变原始文件sort [options] file(s)<br>常用选项<br>-r    执行反方向（由上至下）整理<br>-R    随机排序<br>-n    执行按数字大小整理<br>-f    选项忽略（fold）字符串中的字符大小写<br>-u    选项（独特，unique）删除输出中的重复行<br>-t    c    选项使用c做为字段界定符<br>-k    X    选项按照使用c字符分隔的X列来整理能够使用多次</p>
<h1 id="uniq"><a href="#uniq" class="headerlink" title="uniq"></a>uniq</h1><p>uniq命令：从输入中删除前后相接的重复的行<br>uniq [OPTION]… [FILE]…<br>-c: 显示每行重复出现的次数<br>-d: 仅显示重复过的行<br>-u: 仅显示不曾重复的行<br>注：连续且完全相同方为重复<br>　　常和sort 命令一起配合使用： sort    userlist.txt    |    uniq    -c</p>
<h1 id="patch"><a href="#patch" class="headerlink" title="patch"></a>patch</h1><p>复制对文件改变patch<br>diff    命令的输出被保存在一种叫做“补丁”的文件中<br>使用    -u    选项来输出“统一的（unified）”diff格式文件，最适用于补丁文件<br>patch    复制在其它文件中进行的改变（要谨慎使用）<br>适用    -b    选项来自动备份改变了的文件diff -u foo.conf foo2.conf &gt; foo.patch patch -b foo.conf foo.patch</p>
<h1 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h1><p><font color="red">–color=auto</font>: 对匹配到的文本着色显示 <font color="red"><br>-v</font>: 显示不被pattern匹配到的行 <font color="red"><br>-i</font>: 忽略字符大小写 <font color="red"><br>-n</font>：显示匹配的行号 <font color="red"><br>-c</font>: 统计匹配的行数 <font color="red"><br>-o</font>: 仅显示匹配到的字符串 <font color="red"><br>-q</font>: 静默模式，不输出任何信息 <font color="red"><br>-A</font> #: after, 后#行 <font color="red"><br>-B</font> #: before, 前#行 <font color="red"><br>-C</font> #：context, 前后各#行 <font color="red"><br>-e</font>：实现多个选项间的逻辑or关系 <font color="red"><br><code>grep –e &#39;cat&#39; -e dog&#39; file</code><br>-w</font>：匹配整个单词 <font color="red"><br>-E</font>：使用ERE <font color="red"><br>-F</font>：相当于fgrep，不支持正则表达式 <font color="red"><br>-f</font> file: 根据模式文件处理</p>
<h2 id="字符匹配"><a href="#字符匹配" class="headerlink" title="字符匹配"></a>字符匹配</h2><p>基本正则表达式元字符<br><code>.</code>    匹配任意单个字符<br><code>[]</code> 匹配指定范围内的任意单个字符，示例：[wang]    [0-9]    [a-z]    [a-zA-Z]<br><code>[^]</code> 匹配指定范围外的任意单个字符<br><code>[:alnum:]</code> 字母和数字<br><code>[:alpha:]</code> 代表任何英文大小写字符，亦即 A-Z, a-z<br><code>[:lower:]</code> 小写字母<br><code>[:upper:]</code> 大写字母<br><code>[:blank:]</code> 空白字符（空格和制表符）<br><code>[:space:]</code> 水平和垂直的空白字符（比[:blank:]包含的范围广）<br><code>[:cntrl:]</code> 不可打印的控制字符（退格、删除、警铃…）<br><code>[:digit:]</code> 十进制数字<br><code>[:xdigit:]</code>十六进制数字<br><code>[:graph:]</code> 可打印的非空白字符<br><code>[:print:]</code> 可打印字符<br><code>[:punct:]</code> 标点符号</p>
<h2 id="匹配次数"><a href="#匹配次数" class="headerlink" title="匹配次数"></a>匹配次数</h2><p>用在要指定次数的字符后面，用于指定前面的字符要出现的次数<br><code>*</code>    匹配前面的字符任意次，包括0次贪婪模式：尽可能长的匹配<br><code>.*</code> 任意长度的任意字符<br><code>\?</code> 匹配其前面的字符0或1次<br><code>\+</code> 匹配其前面的字符至少1次<br><code>\{n\}</code> 匹配前面的字符n次<br><code>\{m,n\}</code> 匹配前面的字符至少m次，至多n次<br><code>\{,n\}</code> 匹配前面的字符至多n次<br><code>\{n,\}</code> 匹配前面的字符至少n次</p>
<h2 id="位置锚定"><a href="#位置锚定" class="headerlink" title="位置锚定"></a>位置锚定</h2><p>定位出现的位置：<br><code>^</code> 行首锚定，用于模式的最左侧<br><code>$</code>行尾锚定，用于模式的最右侧<br><code>^PATTERN$</code>    用于模式匹配整行<br><code>^$</code>    空行<br><code>^[[:space:]]*$</code>    空白行<br><code>\&lt;</code>      #锚定单词的开始，如:<code>&#39;\&lt;grep&#39;匹配包含以grep开头的单词的行</code><br><code>\&gt;</code>      #锚定单词的结束，如:<code>&#39;grep\&gt;&#39;匹配包含以grep结尾的单词的行</code><br><code>\b</code>      #单词锁定符，如: <code>&#39;\bgrep\b&#39;只匹配grep</code></p>
<p><table><tr><td bgcolor="red">数字,字母,下划线,不能作为单词的分隔符。</td></tr></table>. </p>
<h2 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h2><p><code>\(\)</code>  将一个或多个字符捆绑在一起，当作一个整体处理，如：<code>\(root\)\+</code><br>分组括号中的模式匹配到的内容会被正则表达式引擎记录于内部的变量中，这些变量的命名方式为: \1, \2, \3, …<br><code>\1</code>    表示从左侧起第一个左括号以及与之匹配右括号之间的模式所匹配到的字符<br>    示例：    <code>\(string1\+\(string2\)*\)</code><br><code>\1: string1\+\(string2\)*</code><br><code>\2: string2</code><br>后向引用：引用前面的分组括号中的模式所匹配字符，而非模式本身<br>或者：|<br>示例：a|b: a或b    C|cat: C或cat    (C|c)at:Cat或cat</p>
<blockquote class="blockquote-center"><p><code>^</code>    行首<br><code>$</code>　行尾　　　<br><code>.</code> 任意单一字符　　　<br><code>[]</code>[]内任意单一字符　　　<br><code>[^]</code> 除[]内任意单一字符　　　<br><code>*</code> 前面字符重复不确定次数　　　<br><code>\+</code> 前面字符重复一次以上不确定次数　　　<br><code>\?</code> 前面字符重复0或1次　　　<br><code>\</code>     转义符<br><code>.*</code> 任意长度字符　　　<br><code>\{n\}</code> 前面字符重复n次　　　<br><code>\{n,\}</code> 前面字符重复n次以上<br><code>\{m,n\}</code> 前面字符重复m次和n次之间</p>
</blockquote>
<h1 id="扩展正则"><a href="#扩展正则" class="headerlink" title="扩展正则"></a>扩展正则</h1><p><table><tr><td bgcolor="#003153"><font color="black"><font size="4"><code>egrep = grep -E</code><br>egrep [OPTIONS] PATTERN [FILE…]<br>扩展正则表达式的元字符：<br><i class="fa fa-child fa-2x" aria-hidden="true"></i><font color="36bf36">字符匹配：<code>.</code>任意单个字符 　　<code>[]</code> 指定范围的字符　　<code>[^]</code> 不在指定范围的字符 </font><br><i class="fa fa-male fa-2x" aria-hidden="true"></i><font color="66ff59">次数匹配：<code>*</code>    匹配前面字符任意次　　<code>?</code> 0或1次 　　<code>+</code> 1次或多次　　 <code>{m}</code> 匹配m次　　 <code>{m,n}</code> 至少m，至多n次 </font><br><i class="fa fa-female  fa-2x" aria-hidden="true"></i><font color="4de680">位置锚定：<code>^</code>    行首 　<code>$</code> 行尾　　<code>\&lt;</code>　#锚定单词的开始　　<code>\&gt;</code>　#锚定单词的结束　　<code>\b</code>　#单词锁定符　</font><br><i class="fa fa-child fa-2x" aria-hidden="true"></i><font color="8ce600">分组：<code>()</code>　　后向引用：\1, \2, …<br>或者：<code>a|b</code>a或b　　　<code>C|cat</code>C或cat　　　<code>(C|c)at</code>Cat或cat<br></font></font></font></td></tr></table>.</p>
<h1 id="vim"><a href="#vim" class="headerlink" title="vim"></a>vim</h1><p><code>:r! 命令</code> 可以将命令执行的结果复制到内容里面去</p>
<h1 id="脚本编程"><a href="#脚本编程" class="headerlink" title="脚本编程"></a>脚本编程</h1><p>　　脚本调试<br>检测脚本中的语法错误<br>bash -n /path/to/some_script<br>　　调试执行<br>bash -x /path/to/some_script</p>
<h1 id="环境变量"><a href="#环境变量" class="headerlink" title="环境变量"></a>环境变量</h1><h2 id="局部变量"><a href="#局部变量" class="headerlink" title="局部变量"></a>局部变量</h2><p>变量赋值：name=‘value’<br>可以使用引用value:<br>　　(1)可以是直接字串; name=“root”<br>　　(2)    变量引用：name=”$USER”<br>　　(3)    命令引用：name=<code>COMMAND</code> name=$(COMMAND)<br>变量引用：${name}  $name<br>　　“”：弱引用，其中的变量引用会被替换为变量值<br>　　‘’：强引用，其中的变量引用不会被替换为变量值，而保持原字符串<br>显示已定义的所有变量：set</p>
<h2 id="删除变量：unset-name"><a href="#删除变量：unset-name" class="headerlink" title="删除变量：unset name"></a>删除变量：unset name</h2><p>查看当前shell进程号：<code>echo $$</code> <code>echo BASHPID</code><br>只读和位置变量<br>只读变量：只能声明，但不能修改和删除<br>声明只读变量：<br>readonly name<br>declare -r name<br>查看只读变量： readonly –p</p>
<h2 id="位置变量：在脚本代码中调用通过命令行传递给脚本的参数"><a href="#位置变量：在脚本代码中调用通过命令行传递给脚本的参数" class="headerlink" title="位置变量：在脚本代码中调用通过命令行传递给脚本的参数"></a>位置变量：在脚本代码中调用通过命令行传递给脚本的参数</h2><p>$1, $2, …：对应第1、第2等参数，shift [n]换位置 $0: 命令本身<br>$*: 传递给脚本的所有参数，全部参数合为一个字符串<br>$@: 传递给脚本的所有参数，每个参数为独立字符串<br>$#: 传递给脚本的参数的个数<br>$@ $* 只在被双引号包起来的时候才会有差异<br>set – 清空所有位置变量<br><img src="https://s2.ax1x.com/2019/04/14/AXGFYD.png" alt=""></p>
<h2 id="退出状态"><a href="#退出状态" class="headerlink" title="退出状态"></a>退出状态</h2><p>进程使用退出状态来报告成功或失败<br>•    0 代表成功，1－255代表失败<br>•    $? 变量保存最近的命令退出状态<br>例如：<br><code>ping -c1 -W1 hostdown &amp;&gt; /dev/null echo $?</code><br>返回值可以被指定。<code>exit 100</code><br>退出状态码<br>bash自定义退出状态码 exit [n]：自定义退出状态码<br>注意：脚本中一旦遇到exit命令，脚本会立即终止；终止退出状态取决于exit命令后面的数字<br>注意：如果未给脚本指定退出状态码，整个脚本的退出状态码取决于脚本中执行的最后一条命令的状态码</p>
<h1 id="算术运算"><a href="#算术运算" class="headerlink" title="算术运算"></a>算术运算</h1><p>算术运算<br>bash中的算术运算:help let<br><code>+, -, *, /, %取模（取余）, **（乘方）</code><br>实现算术运算：<br>(1)    let var=算术表达式<br>(2)    var=$[算术表达式]<br>(3)    var=$((算术表达式))<br>(4)    var=$(expr arg1 arg2 arg3 …)<br>(5)    declare –i var = 数值<br>(6)    echo ‘算术表达式’ | bc<br>乘法符号有些场景中需要转义，如<code>*</code><br>bash有内建的随机数生成器：$RANDOM（0-32767） echo $[$RANDOM%50] ：0-49之间随机数</p>
<pre><code>let &quot;a=8+9&quot;
    a=$[9+7]    
    expr 1 + 3
    declare -i n=3+6
</code></pre><h1 id="颜色指定"><a href="#颜色指定" class="headerlink" title="颜色指定"></a>颜色指定</h1><p>Color=”\e[1;5;$[RANDOM%7+31]m”<br>END=”\e[0m”<br>echo -e “$Color 你好 $END”<br>1：表示亮度；5：表示闪烁<br>表示随机打印出任意颜色的 “你好” </p>
<h1 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h1><p>增强型赋值：<br><code>+=, -=, *=, /=, %</code><br>let varOPERvalue<br>例如:let count+=3<br>自加3后自赋值<br>自增，自减：<br>let var+=1<br>let var++<br>let var-=1<br>let var–</p>
<h1 id="逻辑运算"><a href="#逻辑运算" class="headerlink" title="逻辑运算"></a>逻辑运算</h1><p>true, false 1, 0<br>与：<br>1 与 1 = 1<br>1 与 0 = 0</p>
<p>0 与 1 = 0<br>0 与 0 = 0<br>    或:<br>1 或 1 = 1<br>1 或 0 = 1<br>0 或 1 = 1<br>0 或 0 = 0</p>
<p>非：！<br>! 1 = 0    ! true<br>! 0 = 1    ! false<br>短路运算<br>短路与<br>第一个为0，结果必定为0<br>第一个为1，第二个必须要参与运算短路或<br>第一个为1，结果必定为1<br>第一个为0，第二个必须要参与运算<br>异或：^<br>异或的两个值,相同为假，不同为真<br><code>#str=abcde;[[ &quot;$str&quot; =~ ^abc ]] &amp;&amp; echo true || echo false</code><br>正则表达式<br><code>#str=abcdef;[[ &quot;$str&quot; == abc* ]] &amp;&amp; echo true || echo false</code><br>通配符<br><code>id $1 &amp;&gt; /dev/null &amp; ( echo &amp;1 is exist;exit ) || (useradd $1;echo $1 is created)</code><br><code>echo finined</code><br>小括号会开启子shell。退出只会退出子shell，不会退出脚本本身。</p>
<h1 id="条件测试"><a href="#条件测试" class="headerlink" title="条件测试"></a>条件测试</h1><p>判断某需求是否满足，需要由测试机制来实现<br>专用的测试表达式需要由测试命令辅助完成测试过程<br>评估布尔声明，以便用在条件性执行中<br>•    若真，则返回0<br>•    若假，则返回1<br>测试命令：<br>•    test EXPRESSION<br>•    [ EXPRESSION ]<br>•    [[ EXPRESSION ]]<br>注意：EXPRESSION前后必须有空白字符</p>
<h1 id="Bash的文件权限测试"><a href="#Bash的文件权限测试" class="headerlink" title="Bash的文件权限测试"></a>Bash的文件权限测试</h1><p>存在性测试<br>-a FILE：同-e<br>-e FILE: 文件存在性测试，存在为真，否则为假<br>存在性及类别测试<br>-b FILE：是否存在且为块设备文件<br>-c FILE：是否存在且为字符设备文件<br>-d FILE：是否存在且为目录文件<br>-f FILE：是否存在且为普通文件<br>-h FILE 或 -L FILE：存在且为符号链接文件<br>-p FILE：是否存在且为命名管道文件<br>-S FILE：是否存在且为套接字文件</p>
<h1 id="Bash的文件属性测试"><a href="#Bash的文件属性测试" class="headerlink" title="Bash的文件属性测试"></a>Bash的文件属性测试</h1><p>文件权限测试：<br>-r FILE：是否存在且可读<br>-w FILE: 是否存在且可写<br>-x FILE: 是否存在且可执行<br>文件特殊权限测试：<br>-u FILE：是否存在且拥有suid权限<br>-g FILE：是否存在且拥有sgid权限<br>-k FILE：是否存在且拥有sticky权限</p>
<p>文件大小测试：<br>-s FILE: 是否存在且非空<br>文件是否打开：<br>-t fd: fd 文件描述符是否在某终端已经打开<br>-N FILE：文件自从上一次被读取之后是否被修改过<br>-O FILE：当前有效用户是否为文件属主<br>-G FILE：当前有效用户是否为文件属组</p>
<p>双目测试：<br>FILE1 -ef FILE2: FILE1是否是FILE2的硬链接<br>FILE1 -nt FILE2: FILE1是否新于FILE2（mtime）<br>FILE1 -ot FILE2: FILE1是否旧于FILE2</p>
<h1 id="Bash的组合测试条件"><a href="#Bash的组合测试条件" class="headerlink" title="Bash的组合测试条件"></a>Bash的组合测试条件</h1><p>第一种方式：<br>COMMAND1 &amp;&amp; COMMAND2 并且<br>COMMAND1 || COMMAND2 或者<br>! COMMAND    非<br>如：<code>[ -f “$FILE” ] &amp;&amp; [[ “$FILE”=~ .*\.sh$ ]]</code><br>第二种方式：<br>EXPRESSION1 -a EXPRESSION2 并且<br>EXPRESSION1 -o EXPRESSION2 或者<br>! EXPRESSION<br>必须使用测试命令进行，[[ ]] 不支持<br>示例：<br><code>[ -z “$HOSTNAME” -o $HOSTNAME &quot;==&quot;localhost.localdomain&quot; ] \ &amp;&amp; hostname www.magedu.com</code><br><code>[ -f /bin/cat -a -x /bin/cat ] &amp;&amp; cat /etc/fstab</code></p>
<h1 id="read"><a href="#read" class="headerlink" title="read"></a>read</h1><p>使用read来把输入值分配给一个或多个shell变量 -p 指定要显示的提示<br>-s 静默输入，一般用于密码 -n N 指定输入的字符长度N -d ‘字符’ 输入结束符<br>-t N TIMEOUT为N秒<br>read 从标准输入中读取值，给每个单词分配一个变量所有剩余单词都被分配给最后一个变量<br>read -p “Enter a filename: “ FILE</p>
<h1 id="bash如何展开命令行"><a href="#bash如何展开命令行" class="headerlink" title="bash如何展开命令行"></a>bash如何展开命令行</h1><p>把命令行分成单个命令词<br>展开别名<br>展开大括号的声明（{}）<br>展开波浪符声明（<code>~</code>）<br>命令替换$()  和  <code></code>）<br>再次把命令行分成命令词<br>展开文件通配（<code>*、?、[abc]</code>等等）<br>准备I/0重导向（&lt;、&gt;）<br>运行命令</p>
<h1 id="防止扩展"><a href="#防止扩展" class="headerlink" title="防止扩展"></a>防止扩展</h1><p>反斜线（\）会使随后的字符按原意解释 $ echo Your cost: \$5.00<br>Your cost: $5.00<br>加引号来防止扩展<br>•    单引号（’）防止所有扩展<br>•    双引号（”）也防止所有扩展，但是以下情况例外：<br>$（美元符号）    －  变量扩展<br>`（反引号）    －  命令替换<br>\（反斜线）    －    禁止单个字符扩展<br>!（叹号）    －    历史命令替换</p>
<h1 id="bash的配置文件"><a href="#bash的配置文件" class="headerlink" title="bash的配置文件"></a>bash的配置文件</h1><p>按生效范围划分，存在两类：<br>全局配置：<br>/etc/profile<br>/etc/profile.d/*.sh<br>/etc/bashrc<br>个人配置：<br><code>~/.bash_profile ~/.bashrc</code></p>
<h1 id="shell登录两种方式"><a href="#shell登录两种方式" class="headerlink" title="shell登录两种方式"></a>shell登录两种方式</h1><p>交互式登录：<br>(1)直接通过终端输入账号密码登录<br>(2)使用“su - UserName” 切换的用户<br>执行顺序：<code>/etc/profile --&gt; /etc/profile.d/*.sh --&gt; ~/.bash_profile --&gt; ~/.bashrc --&gt; /etc/bashrc</code><br>非交互式登录：<br>(1)su UserName<br>(2)图形界面下打开的终端<br>(3)执行脚本<br>(4)任何其它的bash实例<br>执行顺序：  <code>/etc/profile.d/*.sh --&gt; /etc/bashrc --&gt;~/.bashrc</code></p>
<h1 id="Profile类"><a href="#Profile类" class="headerlink" title="Profile类"></a>Profile类</h1><p>按功能划分，存在两类：profile类和bashrc类<br>profile类：为交互式登录的shell提供配置全局：<code>/etc/profile, /etc/profile.d/*.sh 个人：~/.bash_profile</code><br>功用：<br>(1)    用于定义环境变量<br>(2)    运行命令或脚本</p>
<h1 id="bashrc类：为非交互式和交互式登录的shell提供配置全局：-etc-bashrc"><a href="#bashrc类：为非交互式和交互式登录的shell提供配置全局：-etc-bashrc" class="headerlink" title="bashrc类：为非交互式和交互式登录的shell提供配置全局：/etc/bashrc"></a>bashrc类：为非交互式和交互式登录的shell提供配置全局：/etc/bashrc</h1><p>个人：<code>~/.bashrc</code><br>功用：<br>(1)    定义命令别名和函数<br>(2)    定义本地变量</p>
<h1 id="编辑配置文件生效"><a href="#编辑配置文件生效" class="headerlink" title="编辑配置文件生效"></a>编辑配置文件生效</h1><p>修改profile和bashrc文件后需要生效：<br>两种方法：<br>.重新启动shell进程<br><strong>.或source</strong><br>例：<code>.~/.bashrc</code></p>
<h1 id="Bash-退出任务"><a href="#Bash-退出任务" class="headerlink" title="Bash 退出任务"></a>Bash 退出任务</h1><p>保存在~/.bash_logout文件中(用户)<br>在退出登录shell时运行<br>用于：创建自动备份<br>清除临时文件<br>想要登出后系统自动执行操作可以将执行动作放在：  ~/.bash_logot</p>
<h1 id=""><a href="#" class="headerlink" title="$-"></a>$-</h1><p>h：hashall，打开这个选项后，Shell 会将命令所在的路径hash下来，避免每次都要查询。通过set +h将h选项关闭<br>i：interactive-comments，包含这个选项说明当前的 shell 是一个交互式的shell。所谓的交互式shell,在脚本中，i选项是关闭的。<br>m：monitor，打开监控模式，就可以通过Job control来控制进程的停止、继续，后台或者前台执行等。<br>B：braceexpand，大括号扩展<br>H：history，H选项打开，可以展开历史列表中的命令，可以通过!感叹号来完成，例如“!!”返回上最近的一个历史命令，“!n”返回第 n 个历史命令</p>
<h1 id="locate"><a href="#locate" class="headerlink" title="locate"></a>locate</h1><p>-i 不区分大小写的搜索<br>-n N 只列举前N个匹配项目<br>-r 使用正则表达式<br>例：搜索名称或路径中带有”conf”的文件<br><code>locate conf</code></p>
<h1 id="find"><a href="#find" class="headerlink" title="find"></a>find</h1><p><i class="fa fa-dot-circle-o"></i>指搜索层级<br>-maxdepth level 最大搜索目录深度，指定目录为第1级<br>-maindepth level 最小搜索目录深度<br><code>find /data -maxdepth 2 -mindepth 2 -name &quot;*.sh&quot;</code> 表示只在/data下的二级目录下搜索<br><i class="fa fa-dot-circle-o"></i>先处理目录内的文件，再处理目录<br>　-depth<br><i class="fa fa-dot-circle-o"></i>根据文件名和inode查找：<br>　-name “文件名称”:支持使用glob<br>　　*,?,[],[^]<br>　-iname “文件名称”:不区分字母大小写<br>　-inum n 按inode号查找<br>　-samefile name 相同inode号的文件<br>　-links n 链接数为n的文件<br>　-reges “PATTERN”:以PATTERN匹配整个文件路径，而非文件名称</p>
<h2 id="查找条件"><a href="#查找条件" class="headerlink" title="查找条件"></a>查找条件</h2><p><i class="fa fa-dot-circle-o"></i>根据属主，属组查找：<font color="red"><br>-user USERNAME</font> :查找属主为指定用户(UID)的文件 <font color="red"><br>-group GROUPNAME</font> :查找属组为指定组(GID)的文件 <font color="red"><br>-uid UserID</font> :查找属主为指定的UID号的文件 <font color="red"><br>-gid GroupID</font> :查找属组为指定的GID号的文件 <font color="red"><br>-nouser</font> :查找没有属主的文件 <font color="red"><br>-nogroup</font> :查找没有属组的文件</p>
<h2 id="根据文件类型查找："><a href="#根据文件类型查找：" class="headerlink" title="根据文件类型查找："></a>根据文件类型查找：</h2><p>-type TYPE: <font color="red"><br>f</font> :普通文件 <font color="red"><br>d</font> :目录文件 <font color="red"><br>l</font> :符号链接文件 <font color="red"><br>s</font> :套接字文件 <font color="red"><br>b</font> :块设备文件 <font color="red"><br>c</font> :字符设备文件 <font color="red"><br>p</font> :管道文件<br>空文件或目录： -empty<br><code>find /app -type d -empty</code></p>
<h2 id="查找条件-1"><a href="#查找条件-1" class="headerlink" title="查找条件"></a>查找条件</h2><p><i class="fa fa-dot-circle-o"></i>组合条件：<br> 与：-a<br> 或：-o<br> 非：-not,!<br><i class="fa fa-dot-circle-o"></i>德 摩根定律：<br>(非A)或(非B)=非(A或B)<br>(非A)且(非B)=非(A或B)<br>示例：<br> !A -a !B = !(A -o B)<br> !A -o !B = !(A -a B)<br><img src="/2018/08/28/马哥笔记/find查找条件非或图.png" alt=""></p>
<h2 id="根据文件大小来查找"><a href="#根据文件大小来查找" class="headerlink" title="根据文件大小来查找"></a>根据文件大小来查找</h2><p> -size[+|-]#UNIT<br> 　常用单位:k,M,G,c(byte)<br> #UNIT:(#-1,#]<br> 　如: 6k表示(5k,6k]<br> -#UNIT:[0,#-1]<br> 　如: +6k表示(0,5k]<br> +#UNIT:(#,∞)<br> 　如: +6k表示(6k,∞)</p>
<h2 id="根据时间戳："><a href="#根据时间戳：" class="headerlink" title="根据时间戳："></a>根据时间戳：</h2><p>以”天”为单位<br>-atime [+|-]#,<br>　#:[#,#+1)<br>　+#:[#+1,∞]<br>　-#:[0,#)<br>-mtime<br>-ctiime<br>以”分钟”为单位<br>-amin<br>-mmin<br>-cmin</p>
<p><div class="note warning"><p><br>atime、ctime、mtime的区别<br>atime：上一次访问这个文件是什么时候<br>ctime：上一次改变这个文件的属性(元数据)是什么时候<br>mtime：上一次改变这个文件的内容是什么时候 </p></div>.</p>
<h2 id="根据权限查找："><a href="#根据权限查找：" class="headerlink" title="根据权限查找："></a>根据权限查找：</h2><p>-perm[/|-]MODE<br>　MODE:精确权限匹配<br>　/MODE:任何一类(u,g,o)对象的权限中只要能一位匹配即可，或关系，从centos7开始淘汰<br>　-MODE:每一类对象都必须同时拥有指定权限，与关系<br>　０:表示不关注<br><span id="inline-green">find -perm 755会匹配权限模式恰好是755的文件<br>只有当任意人有写权限时，find -perm +222就会匹配<br>只要当每个人都有写权限时，find -perm -222才会匹配<br>只要当其他人(other)有写权限时，find -perm -002 才会匹配 </span>.</p>
<h2 id="处理动作"><a href="#处理动作" class="headerlink" title="处理动作"></a>处理动作</h2><p><code>-exec COMMAND {} \;</code>:对查到的每个文件执行有COMMAND指定的命令<br><code>{}</code>:用于引用查找到的文件名称自身<br>find传递查找到的文件至后面的命令时，查找到所有符合条件的文件一次性传递给后面的命令</p>
<h2 id="参数替换xargs"><a href="#参数替换xargs" class="headerlink" title="参数替换xargs"></a>参数替换xargs</h2><p><div class="alert alert-info"><i class="fa fa-info"></i>由于很多命令不支持管道<code>|</code>来传递参数，而日常工作中有这个必要，所以就有了xargs命令<br><i class="fa fa-pencil"></i>xargs用于产生某个命令的参数，xargs可以读入stdin的数据，并且已空格符或回车将stdin的数据分隔为arguments<br><i class="fa fa-pencil"></i>注意:文件名或者是其他意义的名词内含有空格符的情况<br><i class="fa fa-pencil"></i>有些命令不能接受过多参数，命令执行可能会失败，xargs可以解决<br>示例：<br>ls f* | xargs rm<br>find /sbin -perm +700 | ls -l　这个命令是错误的,ls不支持标准输入<br>find /sbin -perm +7000 | xargs ls -l 查找特殊权限的文件<br>find和xargs格式:find | xargs COMMAND </div>.</p>
<h1 id="压缩"><a href="#压缩" class="headerlink" title="压缩"></a>压缩</h1><p>compress [-dfvcVr]\[-b maxbits]\[file…] <font color="red"><br>-d</font> :解压缩，相当于gunzip <font color="red"><br>-c</font> :结果输出至标准输出，不删除原文件 <font color="red"><br>-v</font> :显示详情 <font color="red"><br>uncompress</font> 解压缩<br>zcat file.Z &gt; file</p>
<h2 id="gzip-gunzip"><a href="#gzip-gunzip" class="headerlink" title="gzip/gunzip"></a>gzip/gunzip</h2><p>-d:解压缩，相当于gunzip<br>-c :结果输出至标准输出，保留源文件不改变 <font color="red"><br>-#</font> :1-9，指定压缩比，值越大压缩比越大 <font color="red"><br>zcat:不解压缩的前提下查看文本文件内容</font><br>示例：<div class="alert alert-danger"><i class="fa fa-bug"></i> gzip -c messages &gt; messages.gz<br>gzip -c -d message.gz &gt; messages<br>zcat messages.gz &gt; messages<br>cat messages | gzip &gt; m.gz</div>.</p>
<h2 id="bzip2-bunzip2-bzcat"><a href="#bzip2-bunzip2-bzcat" class="headerlink" title="bzip2/bunzip2/bzcat"></a>bzip2/bunzip2/bzcat</h2><p>bzip2 [option]…FILE… <font color="red"><br>-k</font> :keep，保留原文件 <font color="red"><br>-d</font> :解压缩 <font color="red"><br>-#</font> :1-9,压缩比，默认为9 <font color="red"><br>bzcat:不显示解压缩的前提下查看文件文件内容</font></p>
<h2 id="xz-unxz-xzcat"><a href="#xz-unxz-xzcat" class="headerlink" title="xz/unxz/xzcat"></a>xz/unxz/xzcat</h2><p>xz[OPTION]…FILE… <font color="red"><br>-k</font> :keep，保留原文件 <font color="red"><br>-d</font> :解压缩 <font color="red"><br>-#</font> :1-9，压缩比，默认为6<br>unxz file.xz 解压缩<br>xzcat: 不显示解压缩的前提下查看文本文件内容 <font color="red"><br>-J：使用xz归档压缩；<br>-Jcf /PATH/TO/SOMEFILES.tar FILE…|DIR：归档压缩；<br>-Jxf /PATH/TO/SOMEFILES.tar：展开归档解压缩</font>.</p>
<h2 id="zip-unzip"><a href="#zip-unzip" class="headerlink" title="zip/unzip"></a>zip/unzip</h2><p><i class="fa fa-compress"></i> 打包压缩<br><code>zip -r /backup/sysconfig /etc/sysconfig</code><br>解包解压缩<br><code>unzip sysconfig.zip</code><br><code>cat /var/log/messages | zip messages -</code><br><code>unzip -p message &gt; message</code></p>
<h1 id="tar工具"><a href="#tar工具" class="headerlink" title="tar工具"></a>tar工具</h1><p>-exclude 排除文件<br><code>tar zcvf /root/a3.tgz --exclude=/app/host1 --exclude=/app/host2/app</code><br>-T选项指定输入文件，-X选项指定包含要排除的文件列表<br><code>tar zcvf mybackup.tgz -T /root/includefilelist -X /root/excludefilelist</code></p>
<p><div class="alert alert-info">splist:: 分割一个文件为多个文件<br>分割大的tar文件为多份小文件<br>split -b Size -d tar-file-name prefix-name<br>split -b 1M -d mybackup.tgz mybackup-parts<br>split -b 1m mybackup.taz mybackup-parts<br>合并：<br>cat mybackup-parts* &gt; mybackup.tar.gz<br></div>.</p>
<p><code>spilt -b 2M -d /root/data.tar.xz databak</code> -d会以数字结尾</p>
<h1 id="cpio"><a href="#cpio" class="headerlink" title="cpio"></a>cpio</h1><p>功能：cpio用于创建、解压归档文件，也可以对归档文件执行拷入拷出的动作，即向归档文件中追加文件，或从归档文件中提取文件。它也支持tar格式的归档文件，但是对压缩后的tar(如.tar.gz格式)就没法支持了，cpio毕竟不会调用对应的(解)压缩工具。<div class="alert alert-warning"><i class="fa fa-cog"></i>cpio命令是通过重定向的方式将文件进行打包备份，还原恢复的工具，它可以解压以<code>.cpio</code>或者<code>.tar</code>结尾的文件</div> cpio [选项] &gt; 文件名或者设备名<br>cpio [选项] &lt; 文件名或者设备名 <font color="red"><br>-o</font>    将文件拷贝打包成文件或者将文件输出到设备上 <font color="red"><br>-O</font> filename    输出到指定的归档文件名 <font color="red"><br>-A</font>    向已存在的归档文件中追加文件 <font color="red"><br>-i</font>    解包，将打包文件解压或将设备上的备份还原到系统 <font color="red"><br>-I</font> filename    对指定的归档文件名解压 <font color="red"><br>-t</font>    预览，查看文件内容或者输出到设备上的文件内容 <font color="red"><br>-F</font> filename    使用指定的文件名替代标准输入或输出 <font color="red"><br>-d</font>    解包生成目录，在cpio还原时，自动的建立目录 <font color="red"><br>-v</font>    显示打包过程中的文件名称</p>
<p><table><tr><td bgcolor="#00808c"> <i class="fa fa-pencil-square-o" aria-hidden="true"></i><font color="red"> 将etc目录备份</font>：<code>find ./etc -print |cpio -ov &gt;bak.cpio</code><br><i class="fa fa-pencil-square-o" aria-hidden="true"></i><font color="red">  将/data内容追加bak.cpio</font> <code>find /data | cpio -oA -F bak.cpio</code><br><i class="fa fa-pencil-square-o" aria-hidden="true"></i><font color="red">  内容预览</font><br><code>cpio –tv &lt; etc.cpio</code><br><i class="fa fa-pencil-square-o" aria-hidden="true"></i><font color="red">  解包文件</font> <code>cpio –idv &lt; etc.cpio</code> </td></tr></table>.</p>
<h1 id="sed"><a href="#sed" class="headerlink" title="sed"></a>sed</h1><p><font color="red">-n </font> 不输出模式空间内容到屏幕，即不自动打印 <font color="red"><br>-e</font> 多点编辑 <font color="red"><br>-f</font> /PATH/SCRIPT_FILE    从指定文件中读取编辑脚本 <font color="red"><br>-r</font> 支持使用扩展正则表达  <font color="red"><br>-i.bak</font>     备份文件并原处编辑<br>script:<br>　　<code>&#39;地址命令&#39;</code><br>地址定界：　<table><tr><td bgcolor="003153"><font size="3"><font color="36bf36"><font face="Microsoft YaHei">(1)    不给地址：对全文进行处理<br>(2)    单地址：<br>　　<code>#</code>: 指定的行，<code>$</code>：最后一行  <code>/pattern/</code>：被此处模式所能够匹配到的每一行<br>(3)    地址范围：<br>　　<code>#,#</code>  <code>#,+#</code>  <code>pat1/,/pat2/</code><br>　　<code>#,/pat1/</code><br>(4)    <code>~</code>：步进  1~2 奇数行,  2~2 偶数行<br><code>sed -i.back &#39;/^root/aadmin line passwd&#39;</code> 插入并备份原文件</font></font></font></td></tr></table></p>
<p>使用sed将/etc/httpd/conf/httpd.conf中#NameVirtualHost *:80去掉#号,同时将最后7行的#都去掉<br>解:<code>sed -e &#39;s/#Name/Name/&#39; -e &#39;/#&lt;VirtualHost/,/#&lt;\/Virtual/s/#//&#39; /etc/httpd/conf/httpd.conf</code><br>.</p>
<h2 id="编辑命令"><a href="#编辑命令" class="headerlink" title="编辑命令"></a>编辑命令</h2><p><table><tr><td bgcolor="003366"><font size="3"><font face="Microsoft YaHei"><font color="2aae2a"><code>d</code> 删除模式空间匹配的行，并立即启用下一轮循环<br><code>p</code> 打印当前模式空间内容，追加到默认输出之后<br><code>a</code> []text在指定行后面追加文本，支持使用\n实现多行追加<br><code>i</code> []text在行前面插入文本<br><code>c</code> []text    替换行为单行或多行文本<br><code>w</code> /path/file 保存模式匹配的行至指定文件<br><code>r</code> /path/file读取指定文件的文本至模式空间中匹配到的行后<br><code>=</code> 为模式空间中的行打印行号<br><code>!</code> 模式空间中匹配行取反处理<br></font></font></font></td></tr></table> <code>sed  &#39;/^UUID/r /etc/issue&#39; /etc/fstab</code> 读取/etc/issue中的内容到/etc/fstab UUID开头的行后 </p>
<pre><code>     seq 10 | sed  &#39;1~2d&#39; 输出双数的行  
     seq 10 | sed &#39;axxx\nyyy\nzzz&#39;   
     sed &#39;/^root/i\  admin line&#39; /etc/passwd 加入了空格  
     sed &#39;/^root/aadmin line&#39; /etc/passwd  
     sed &#39;/^UUID/w f1&#39; /etc/fstab  
     sed  &#39;/^UUID/=&#39; /etc/fstab  打印UUID开头的行显示行号  
</code></pre><h2 id="sed替换"><a href="#sed替换" class="headerlink" title="sed替换"></a>sed替换</h2><p><code>s///</code>    查找替换,支持使用其它分隔符，<code>s@@@</code>，<code>s###</code><br>替换标记：<br><code>g</code>    行内全局替换<br><code>p</code>    显示替换成功的行<br><code>w /PATH/FILE</code>  将替换成功的行保存至文件中<br>例：<br><code>sed -n  &#39;s/UUID/tempfilesystem/gp&#39; /etc/fstab</code><br><code>ifconfig | sed -n &#39;2p&#39; | sed &#39;s/.*inet //&#39;|sed &#39;s@ netmask.*$@@&#39;</code><br><code>ifconfig | sed -nr &#39;2s/.*t (.*) net.*/\1/gp&#39;</code><br><code>ifconfig ens33 | sed -r &#39;2!d;s/.*inet (addr:)?//;s/  .*//&#39;</code> sed取IP地址<br><code>echo /etc/sysconfig/network-scripts/ | sed -nr &#39;s#(^.*/)([^/].*)/?$#\1#p&#39;</code>取基名（不理解）<br>sed大小写转换：<br><code>sed -r &#39;s/[[:alpha:]]/\u&amp;/g&#39; /etc/fstab</code><br><code>sed -r &#39;s/[[:alpha:]]/\l&amp;/g&#39; /etc/fstab</code></p>
<h2 id="sed-示例"><a href="#sed-示例" class="headerlink" title="sed 示例"></a>sed 示例</h2><pre><code>sed ‘2p’ /etc/passwd
sed –n ‘2p’ /etc/passwd
sed –n ‘1,4p’ /etc/passwd
sed –n ‘/root/p’  /etc/passwd
sed –n ‘2,/root/p’  /etc/passwd 从2行开始
sed -n ‘/^$/=’ file 显示空行行号
sed –n –e ‘/^$/p’ –e ‘/^$/=’ file
sed  ‘/root/a\superman’ /etc/passwd行后
sed ‘/root/i\superman’ /etc/passwd 行前
sed ‘/root/c\superman’ /etc/passwd 代替行
c:是表示将我现在所写的字符与所找到的行全部替换。不是字符替换。
</code></pre><pre><code>sed ‘/^$/d’ file
sed ‘1,10d’  file
nl  /etc/passwd | sed ‘2,5d’
nl  /etc/passwd | sed ‘2a tea’
sed &#39;s/test/mytest/g&#39; example
sed –n ‘s/root/&amp;superman/p’ /etc/passwd 单词后
sed –n ‘s/root/superman&amp;/p’ /etc/passwd 单词前
sed -e ‘s/dog/cat/’ -e ‘s/hi/lo/’ pets
sed –i.bak ‘s/dog/cat/g’ pets
nl:表示显示行号，空行不显示
&amp;：代表前面找到的内容 
</code></pre><h2 id="sed高级"><a href="#sed高级" class="headerlink" title="sed高级"></a>sed高级</h2><p>P：打印模式空间开端至\n内容，并追加到默认输出之前<br>h: 把模式空间中的内容覆盖至保持空间中<br>H：把模式空间中的内容追加至保持空间中<br>g: 从保持空间取出数据覆盖至模式空间<br>G：从保持空间取出内容追加至模式空间<br>x: 把模式空间中的内容与保持空间中的内容进行互换<br>n: 读取匹配到的行的下一行覆盖至模式空间<br>N：读取匹配到的行的下一行追加至模式空间<br>d: 删除模式空间中的行<br>D：如果模式空间包含换行符，则删除直到第一个换行符的模式空间中的文本，并不会读取新的输入行，而使用合成的模式空间重新启动循环。如果模式空间不包含换行符，则会像发出d命令那样启动正常的新循环</p>
<pre><code>sed -n &#39;n;p&#39; FILE
sed &#39;1!G;h;$!d&#39; FILE
sed‘N;D’FILE
sed &#39;$!N;$!D&#39; FILE
sed &#39;$!d&#39; FILE
sed ‘G’ FILE
sed ‘g’ FILE
sed ‘/^$/d;G’ FILE
sed &#39;n;d&#39; FILE
sed -n &#39;1!G;h;$p&#39; FILE
</code></pre><h1 id="rpm"><a href="#rpm" class="headerlink" title="rpm"></a>rpm</h1><p><font color="red">–test</font>: 测试安装，但不真正执行安装，即dry run模式<font color="red"><br>–nodeps</font>：忽略依赖关系<font color="red"><br>–replacepkgs</font> 强制重新安装已经安装的软件包<font color="red"><br>–replacefiles</font> 替换属于其他软件包的文件<font color="red"><br>–nosignature</font>: 不检查来源合法性 <font color="red"><br>–nodigest</font>：不检查包完整性<font color="red"><br>–noscripts</font>：不执行程序包脚本<br>　　　%pre:安装前脚本　–nopre<br>　　　%post: 安装后脚本 –nopost<br>　　　%preun: 卸载前脚本 –nopreun　<br>　　　%postun:卸载后脚本 –nopostun</p>
<h2 id="rpm升级"><a href="#rpm升级" class="headerlink" title="rpm升级"></a>rpm升级</h2><p><font color="red">upgrade</font>：安装有旧版程序包，则“升级”<br>如果不存在旧版程序包，则“安装” freshen：安装有旧版程序包，则“升级”<br>如果不存在旧版程序包，则不执行升级操作 rpm -Uvh PACKAGE_FILE …<br>rpm -Fvh PACKAGE_FILE …<font color="red"><br>–oldpackage</font>：降级  <font color="red"><br>–force</font>: 强制安装 <div class="alert alert-warning"><i class="fa fa-bell"></i> 注意：<br>(1)    不要对内核做升级操作；Linux支持多内核版本并存，因此，可以直接安装新版本内核<br>(2)    如果原程序包的配置文件安装后曾被修改，升级时，新版本的提供的同一个配置文件并不会直接覆盖老版本的配置文件，而把新版本的文件重命名(FILENAME.rpmnew)后保留</div>.</p>
<h2 id="包查询"><a href="#包查询" class="headerlink" title="包查询"></a>包查询</h2><p><font color="red">-a</font>: 所有包 <font color="red"><br>-f</font>: 查看指定的文件由哪个程序包安装生成 <font color="red"><br>-p rpmfile</font>：针对尚未安装的程序包文件做查询操作 <font color="red"><br>–whatprovides CAPABILITY</font>：查询指定的CAPABILITY由哪个包所提供 <font color="red"><br>–whatrequires CAPABILITY</font>：查询指定的CAPABILITY被哪个包所依赖<br><code>rpm2cpio 包文件|cpio –itv 预览包内文件</code><br><code>rpm2cpio 包文件|cpio –id &quot;\*.conf&quot; 释放包内文件</code> <font color="red"><br>–changelog</font>：查询rpm包的changelog  <font color="red"><br>-c</font>: 查询程序的配置文件 <font color="red"><br>-d</font>: 查询程序的文档 <font color="red"><br>-i</font>: information <font color="red"><br>-l</font>: 查看指定的程序包安装后生成的所有文件 <font color="red"><br>–scripts</font>：程序包自带的脚本 <font color="red"><br>–provides</font>: 列出指定程序包所提供的CAPABILITY <font color="red"><br>-R</font>: 查询指定的程序包所依赖的CAPABILITY</p>
<h2 id="包校验"><a href="#包校验" class="headerlink" title="包校验"></a>包校验</h2><p><font color="lime">#</font>rpm -V 已安装的包名<br>选项：-V 校验指定RPM包中的文件。(verify)  <font color="lime"><br>[root@Tiger ~]#</font>rpm -V httpd<br><strong>S.5….T.  c /etc/httpd/conf/httpd.conf</strong><br>验证内容中的8个信息的具体内容如下：  <font color="red"><br>S</font>：文件大小是否改变；  <font color="red"><br>M</font>：文件的类型或文件的权限(r w x)是否被改变；  <font color="red"><br>5</font>：文件MD5校验和是否改变(可以看成文件的内容是否改变)；  <font color="red"><br>D</font>：设备的主，从设备号是否改变；  <font color="red"><br>L</font>：文件路径是否改变；  <font color="red"><br>U</font>：文件的属主(所有者)是否改变；  <font color="red"><br>G</font>：文件的属组是否改变；  <font color="red"><br>T</font>：文件的修改时间是否改变；<br><strong>文件类型：</strong> <font color="red"><br>c</font> :配置文件(config file)  <font color="red"><br>d</font> :普通文档(documentation)  <font color="red"><br>g</font> :”鬼”文件(ghost file),很少见，就是该文件不应该被这个RPM包包含  <font color="red"><br>l</font> :授权文件(license file)  <font color="red"><br>r</font> :描述文件(read me)</p>
<h2 id="秘钥"><a href="#秘钥" class="headerlink" title="秘钥"></a>秘钥</h2><p>包来源合法性验正及完整性验证完整性验证：SHA256<br>来源合法性验证：RSA<br>公钥加密<br>对称加密：加密、解密使用同一密钥非对称加密：密钥是成对儿的<br>public key: 公钥，公开所有人<br>secret key: 私钥, 不能公开<br>导入所需要公钥<br><code>rpm -K|checksig rpmfile</code> 检查包的完整性和签名<br><code>rpm --import /etc/pki/rpm-gpg/RPM-GPG-KEY-CentOS-7</code> CentOS 7发行版光盘提供：RPM-GPG-KEY-CentOS-7<br><code>rpm -qa &quot;gpg-pubkey*&quot;</code></p>
<p>检查系统公钥 <code>rpm -qa &quot;gpg-pubkey*&quot;</code><br><code>[root@centos7 Packages]# rpm --import /mnt/RPM-GPG-KEY-CentOS-7</code><br><code>[root@centos7 Packages]# rpm -K tree-1.6.0-10.el7.x86_64.rpm</code></p>
<h2 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h2><p>数据库重建：/var/lib/rpm<br>rpm {–initdb|–rebuilddb} initdb: 初始化<br>如果事先不存在数据库，则新建之否则，不执行任何操作<br>rebuilddb：重建已安装的包头的数据库索引目录</p>
<h1 id="centos6-内核救援"><a href="#centos6-内核救援" class="headerlink" title="centos6 内核救援"></a>centos6 内核救援</h1><p><img src="https://s2.ax1x.com/2019/05/03/ENOeun.png" alt=""><br><img src="https://s2.ax1x.com/2019/05/03/ENOnH0.png" alt=""></p>
<h1 id="yum"><a href="#yum" class="headerlink" title="yum"></a>yum</h1><p><code>yum repolist</code> 查看仓库信息<br>仓库的元数据<br>[root@centos7 ~]# cd /var/cache/yum/x86_64/7/<br><code>yum history</code> 查看yum安装历史<br><code>yum history info 2</code> 查看历史中的第二项</p>
<pre><code>[epel]
name=EPEL
baseurl=https://mirrors.tuna.tsinghua.edu.cn/epel/$releasever/$basearch
gpgcheck=0
</code></pre><p><img src="https://s2.ax1x.com/2019/05/04/EauSmR.png" alt="">yum客户端配置文件：<br><code>/etc/yum.conf</code>：为所有仓库提供公共配置<code>/etc/yum.repos.d/*.repo</code>：为仓库的指向提供配置仓库指向的定义：<pre>[repositoryID]<br>name=Some name for this repository<br>baseurl=url://path/to/repository/<br>enabled={1|0}<br>gpgcheck={1|0}<br>gpgkey=URL<br>enablegroups={1|0}<br>failovermethod={roundrobin|priority}<br>roundrobin：意为随机挑选，默认值<br>priority:按顺序访问<br>cost=    默认为1000</pre> yum的repo配置文件中可用的变量：<br><code>$releasever</code>: 当前OS的发行版的主版本号<br><code>$arch</code>: 平台，i386,i486,i586,x86_64等<br><code>$basearch</code>：基础平台；i386, x86_64<br><code>$YUM0-$YUM9</code>:自定义变量<br>实例:</p>
<pre><code>http://server/centos/$releasever/$basearch/ 
http://server/centos/7/x86_64 
http://server/centos/6/i384
</code></pre><h2 id="实验基于httpd搭建的yum服务器："><a href="#实验基于httpd搭建的yum服务器：" class="headerlink" title="实验基于httpd搭建的yum服务器："></a>实验基于httpd搭建的yum服务器：</h2><pre><code>yum install -y httpd
mkdir -pv centos/{6,7}/os/x86_64 

html/
└── centos
    ├── 6
    │   └── os
    │       └── x86_64
    └── 7
        └── os
            └── x86_64
                ├── EFI
                │   └── BOOT
                │       └── fonts
                ├── images
                │   └── pxeboot
                ├── isolinux
                ├── LiveOS
                ├── Packages
                └── repodata
mount /dev/sr0 html/centos/7/os/x86_64/
[base]
name=Centos
\#baseurl=file:///run/media/pan/CentOS\ 7\ x86_64/
baseurl=http://192.168.134.138/centos/$releasever/os/$basearch
gpgcheck=0
</code></pre><h2 id="yum-调用文件路径："><a href="#yum-调用文件路径：" class="headerlink" title="yum 调用文件路径：`"></a>yum 调用文件路径：<code>`</code></h2><p>mirrorlist=<a href="http://192.168.134.138/list.txt" target="_blank" rel="noopener">http://192.168.134.138/list.txt</a><br>[root@centos7 html]# ls<br>centos  list.txt<br>[root@centos7 html]# cat list.txt<br>file:///var/www/html/centos/7/os/x86_64<br>baseurl=<a href="http://192.168.134.138/centos/$releasever/os/$basearch```" target="_blank" rel="noopener">http://192.168.134.138/centos/$releasever/os/$basearch```</a></p>
<h2 id="源码编译"><a href="#源码编译" class="headerlink" title="源码编译"></a>源码编译</h2><pre><code>yum groupinstall &quot;development tools&quot;
tar xf cmatrix-1.2a.tar.gz
cd cmatrix-1.2a
./configure --prefix=/app/cmatrix
make &amp;&amp; make install
yum install -y ncurses-devel(缺的包)
make &amp;&amp; make install
cd /app/cmtrix/bin
./cmatrix 
写入PATH
echo &#39;PATH=/app/httpd/bin:$PATH&#39; &gt; /etc/profile.d/httpd.sh
. /etc/profile.d/httpd.sh
</code></pre><h1 id="centos7-支持神奇目录："><a href="#centos7-支持神奇目录：" class="headerlink" title="centos7:支持神奇目录："></a>centos7:支持神奇目录：</h1><p><code>rpm -q autofs</code><br><code>systemctl enabled autofs</code><br><code>systemctl start autofs</code></p>
<p><div class="alert alert-warning"><i class="fa fa-bell"></i><br>建立仓库元数据：createrepo /data/repodb<br>yum仓库必须要仓库元数据才能使用</div>.</p>
<h1 id="centos-防火墙"><a href="#centos-防火墙" class="headerlink" title="centos 防火墙"></a>centos 防火墙</h1><p>cnetos7:<br>下次开机不启用 <code>systemctl disable firewalld</code><br>现在马上关掉：<code>systemctl stop firewalld</code></p>
<p>centos6:<br><code>chkconfig iptables off</code><br><code>service iptables stop</code></p>

      
    </div>

    

    
    
    

    
    
<div>
  
    <div>
    
        <div style="text-align:center;color: #ccc;font-size:14px;">-------------本文结束<i class="fa fa-paw"></i>感谢您的阅读-------------</div>
    
</div>
  
</div>

    
      <div>
        <div style="padding: 10px 0; margin: 20px auto; width: 90%; text-align: center;">
  <div>打赏</div>
  <button id="rewardButton" disable="enable" onclick="var qr = document.getElementById('QR'); if (qr.style.display === 'none') {qr.style.display='block';} else {qr.style.display='none'}">
    <span>Donate</span>
  </button>
  <div id="QR" style="display: none;">

    
      <div id="wechat" style="display: inline-block">
        <img id="wechat_qr" src="https://s2.ax1x.com/2019/04/29/E1FABt.jpg" alt="panxiaohu WeChat Pay"/>
        <p>WeChat Pay</p>
      </div>
    

    
      <div id="alipay" style="display: inline-block">
        <img id="alipay_qr" src="https://s2.ax1x.com/2019/04/29/E1FZAf.jpg" alt="panxiaohu Alipay"/>
        <p>Alipay</p>
      </div>
    

    

  </div>
</div>

      </div>
    

    
      <div>
        <ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>Post author:  </strong>panxiaohu</li>
  <li class="post-copyright-link">
    <strong>Post link: </strong>
    <a href="http://yoursite.com/2018/08/28/马哥笔记/" title="one">http://yoursite.com/2018/08/28/马哥笔记/</a>
  </li>
  <li class="post-copyright-license">
    <strong>Copyright Notice:  </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> unless stating additionally.</li>
</ul>

      </div>
    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/command/" rel="tag"><i class="fa fa-tag"></i> command</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/08/28/document/" rel="prev" title="document">
                document <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  
    <div class="comments" id="comments">
    </div>
  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/../images/head-portrait.jpg"
                alt="panxiaohu" />
            
              <p class="site-author-name" itemprop="name">panxiaohu</p>
              <p class="site-description motion-element" itemprop="description">I love you</p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">9</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
<script type="text/javascript" charset="utf-8" src="/js/tagcloud.js"></script>
<script type="text/javascript" charset="utf-8" src="/js/tagcanvas.js"></script>
<div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div id="myCanvasContainer" class="widget tagcloud">
        <canvas width="250" height="250" id="resCanvas" style="width=100%">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Document/">Document</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/command/">command</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/document/">document</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/life/">life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/note/">note</a><span class="tag-list-count">2</span></li></ul>
        </canvas>
    </div>
</div>

            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  <a href="mailto:panxiaotiger@gmail.com" target="_blank" title="E-Mail"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://youtube.com/" target="_blank" title="YouTube"><i class="fa fa-fw fa-youtube"></i>YouTube</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="https://www.jianshu.com/u/a68525cdd2e5" target="_blank" title="简书"><i class="fa fa-fw fa-heartbeat"></i>简书</a>
                  
                </span>
              
                <span class="links-of-author-item">
                  <a href="tencent://message/?uin=1915333545&Site=Senlon.Net&Menu=yes" target="_blank" title="qq"><i class="fa fa-fw fa-qq"></i>qq</a>
                  
                </span>
              
            </div>
          

          
          

          
          
            <div class="links-of-blogroll motion-element links-of-blogroll-block">
              <div class="links-of-blogroll-title">
                <i class="fa  fa-fw fa-link"></i>
                Links
              </div>
              <ul class="links-of-blogroll-list">
                
                  <li class="links-of-blogroll-item">
                    <a href="https://music.163.com/#/user/home?id=113656157" title="music" target="_blank">music</a>
                  </li>
                
                  <li class="links-of-blogroll-item">
                    <a href="https://qianling.pw/style/#TOC%E6%95%B0%E5%AD%97%E5%9D%97" title="blog" target="_blank">blog</a>
                  </li>
                
              </ul>
            </div>
          

          
            
          
          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#命令积累"><span class="nav-number">1.</span> <span class="nav-text">命令积累</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#进制转换"><span class="nav-number">2.</span> <span class="nav-text">进制转换</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#touch"><span class="nav-number">3.</span> <span class="nav-text">touch</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#DAS-NAS-SAM"><span class="nav-number">4.</span> <span class="nav-text">DAS NAS SAM</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#分区"><span class="nav-number">5.</span> <span class="nav-text">分区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#运行模式："><span class="nav-number">6.</span> <span class="nav-text">运行模式：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#终端"><span class="nav-number">7.</span> <span class="nav-text">终端</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#centos7启动网络"><span class="nav-number">8.</span> <span class="nav-text">centos7启动网络</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#查看版本号"><span class="nav-number">9.</span> <span class="nav-text">查看版本号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#命令提示符"><span class="nav-number">10.</span> <span class="nav-text">命令提示符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#虚拟机取消密码进入"><span class="nav-number">11.</span> <span class="nav-text">虚拟机取消密码进入</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#查看命令类型"><span class="nav-number">12.</span> <span class="nav-text">查看命令类型</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#命令执行路径"><span class="nav-number">13.</span> <span class="nav-text">命令执行路径</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#别名"><span class="nav-number">14.</span> <span class="nav-text">别名</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#日期和时间"><span class="nav-number">15.</span> <span class="nav-text">日期和时间</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#whoami"><span class="nav-number">16.</span> <span class="nav-text">whoami</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#远程协助：screen"><span class="nav-number">17.</span> <span class="nav-text">远程协助：screen</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#echo"><span class="nav-number">18.</span> <span class="nav-text">echo</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#hexdump"><span class="nav-number">19.</span> <span class="nav-text">hexdump</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Centos7设置语言"><span class="nav-number">20.</span> <span class="nav-text">Centos7设置语言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#符号"><span class="nav-number">21.</span> <span class="nav-text">符号</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#whatis"><span class="nav-number">22.</span> <span class="nav-text">whatis</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#history"><span class="nav-number">23.</span> <span class="nav-text">history</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#man"><span class="nav-number">24.</span> <span class="nav-text">man</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#man-命令的操作方法：使用less-命令实现"><span class="nav-number">24.1.</span> <span class="nav-text">man 命令的操作方法：使用less 命令实现</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#man搜索"><span class="nav-number">24.2.</span> <span class="nav-text">man搜索</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bash-的快捷键"><span class="nav-number">25.</span> <span class="nav-text">bash 的快捷键</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#基名，目录名"><span class="nav-number">26.</span> <span class="nav-text">基名，目录名</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#centos6自动挂载"><span class="nav-number">27.</span> <span class="nav-text">centos6自动挂载</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#通配符"><span class="nav-number">28.</span> <span class="nav-text">通配符</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#atime-mtime-ctime"><span class="nav-number">29.</span> <span class="nav-text">atime mtime ctime</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cp"><span class="nav-number">30.</span> <span class="nav-text">cp</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mv"><span class="nav-number">31.</span> <span class="nav-text">mv</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rename"><span class="nav-number">32.</span> <span class="nav-text">rename</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tree"><span class="nav-number">33.</span> <span class="nav-text">tree</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#mkdir"><span class="nav-number">34.</span> <span class="nav-text">mkdir</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rmdir"><span class="nav-number">35.</span> <span class="nav-text">rmdir</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#inode"><span class="nav-number">36.</span> <span class="nav-text">inode</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#硬链接"><span class="nav-number">37.</span> <span class="nav-text">硬链接</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#软链接"><span class="nav-number">37.1.</span> <span class="nav-text">软链接</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#file"><span class="nav-number">38.</span> <span class="nav-text">file</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tr"><span class="nav-number">39.</span> <span class="nav-text">tr</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#用户"><span class="nav-number">40.</span> <span class="nav-text">用户</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Linux安全上下文"><span class="nav-number">40.1.</span> <span class="nav-text">Linux安全上下文</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#组"><span class="nav-number">40.2.</span> <span class="nav-text">组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#用户和组的配置文件"><span class="nav-number">40.3.</span> <span class="nav-text">用户和组的配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#passwd-文件格式"><span class="nav-number">40.4.</span> <span class="nav-text">passwd 文件格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#shadow文件格式"><span class="nav-number">40.5.</span> <span class="nav-text">shadow文件格式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#例"><span class="nav-number">40.6.</span> <span class="nav-text">例</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#id"><span class="nav-number">41.</span> <span class="nav-text">id</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#su"><span class="nav-number">42.</span> <span class="nav-text">su</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#passwd"><span class="nav-number">43.</span> <span class="nav-text">passwd</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#chage"><span class="nav-number">44.</span> <span class="nav-text">chage</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#groupmod"><span class="nav-number">45.</span> <span class="nav-text">groupmod</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#gpasswd"><span class="nav-number">46.</span> <span class="nav-text">gpasswd</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#groupmems"><span class="nav-number">47.</span> <span class="nav-text">groupmems</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#umask"><span class="nav-number">48.</span> <span class="nav-text">umask</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SUID-SGID-STICKY"><span class="nav-number">49.</span> <span class="nav-text">SUID SGID STICKY</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#chattr"><span class="nav-number">50.</span> <span class="nav-text">chattr</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ACL"><span class="nav-number">51.</span> <span class="nav-text">ACL</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cat-head-tail-cut"><span class="nav-number">52.</span> <span class="nav-text">cat,head,tail,cut</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#显示文本前或后行内容"><span class="nav-number">52.1.</span> <span class="nav-text">显示文本前或后行内容</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#按列抽取文本cut和合并文件paste"><span class="nav-number">52.2.</span> <span class="nav-text">按列抽取文本cut和合并文件paste</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cut和paste"><span class="nav-number">53.</span> <span class="nav-text">cut和paste</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#wc"><span class="nav-number">54.</span> <span class="nav-text">wc</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sort"><span class="nav-number">55.</span> <span class="nav-text">sort</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#uniq"><span class="nav-number">56.</span> <span class="nav-text">uniq</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#patch"><span class="nav-number">57.</span> <span class="nav-text">patch</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#grep"><span class="nav-number">58.</span> <span class="nav-text">grep</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符匹配"><span class="nav-number">58.1.</span> <span class="nav-text">字符匹配</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#匹配次数"><span class="nav-number">58.2.</span> <span class="nav-text">匹配次数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#位置锚定"><span class="nav-number">58.3.</span> <span class="nav-text">位置锚定</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#分组"><span class="nav-number">58.4.</span> <span class="nav-text">分组</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#扩展正则"><span class="nav-number">59.</span> <span class="nav-text">扩展正则</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#vim"><span class="nav-number">60.</span> <span class="nav-text">vim</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#脚本编程"><span class="nav-number">61.</span> <span class="nav-text">脚本编程</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#环境变量"><span class="nav-number">62.</span> <span class="nav-text">环境变量</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#局部变量"><span class="nav-number">62.1.</span> <span class="nav-text">局部变量</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#删除变量：unset-name"><span class="nav-number">62.2.</span> <span class="nav-text">删除变量：unset name</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#位置变量：在脚本代码中调用通过命令行传递给脚本的参数"><span class="nav-number">62.3.</span> <span class="nav-text">位置变量：在脚本代码中调用通过命令行传递给脚本的参数</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#退出状态"><span class="nav-number">62.4.</span> <span class="nav-text">退出状态</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#算术运算"><span class="nav-number">63.</span> <span class="nav-text">算术运算</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#颜色指定"><span class="nav-number">64.</span> <span class="nav-text">颜色指定</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#赋值"><span class="nav-number">65.</span> <span class="nav-text">赋值</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#逻辑运算"><span class="nav-number">66.</span> <span class="nav-text">逻辑运算</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#条件测试"><span class="nav-number">67.</span> <span class="nav-text">条件测试</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Bash的文件权限测试"><span class="nav-number">68.</span> <span class="nav-text">Bash的文件权限测试</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Bash的文件属性测试"><span class="nav-number">69.</span> <span class="nav-text">Bash的文件属性测试</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Bash的组合测试条件"><span class="nav-number">70.</span> <span class="nav-text">Bash的组合测试条件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#read"><span class="nav-number">71.</span> <span class="nav-text">read</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bash如何展开命令行"><span class="nav-number">72.</span> <span class="nav-text">bash如何展开命令行</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#防止扩展"><span class="nav-number">73.</span> <span class="nav-text">防止扩展</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bash的配置文件"><span class="nav-number">74.</span> <span class="nav-text">bash的配置文件</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#shell登录两种方式"><span class="nav-number">75.</span> <span class="nav-text">shell登录两种方式</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Profile类"><span class="nav-number">76.</span> <span class="nav-text">Profile类</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#bashrc类：为非交互式和交互式登录的shell提供配置全局：-etc-bashrc"><span class="nav-number">77.</span> <span class="nav-text">bashrc类：为非交互式和交互式登录的shell提供配置全局：/etc/bashrc</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#编辑配置文件生效"><span class="nav-number">78.</span> <span class="nav-text">编辑配置文件生效</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Bash-退出任务"><span class="nav-number">79.</span> <span class="nav-text">Bash 退出任务</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#"><span class="nav-number">80.</span> <span class="nav-text">$-</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#locate"><span class="nav-number">81.</span> <span class="nav-text">locate</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#find"><span class="nav-number">82.</span> <span class="nav-text">find</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#查找条件"><span class="nav-number">82.1.</span> <span class="nav-text">查找条件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#根据文件类型查找："><span class="nav-number">82.2.</span> <span class="nav-text">根据文件类型查找：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查找条件-1"><span class="nav-number">82.3.</span> <span class="nav-text">查找条件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#根据文件大小来查找"><span class="nav-number">82.4.</span> <span class="nav-text">根据文件大小来查找</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#根据时间戳："><span class="nav-number">82.5.</span> <span class="nav-text">根据时间戳：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#根据权限查找："><span class="nav-number">82.6.</span> <span class="nav-text">根据权限查找：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#处理动作"><span class="nav-number">82.7.</span> <span class="nav-text">处理动作</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参数替换xargs"><span class="nav-number">82.8.</span> <span class="nav-text">参数替换xargs</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#压缩"><span class="nav-number">83.</span> <span class="nav-text">压缩</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#gzip-gunzip"><span class="nav-number">83.1.</span> <span class="nav-text">gzip/gunzip</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#bzip2-bunzip2-bzcat"><span class="nav-number">83.2.</span> <span class="nav-text">bzip2/bunzip2/bzcat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#xz-unxz-xzcat"><span class="nav-number">83.3.</span> <span class="nav-text">xz/unxz/xzcat</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#zip-unzip"><span class="nav-number">83.4.</span> <span class="nav-text">zip/unzip</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#tar工具"><span class="nav-number">84.</span> <span class="nav-text">tar工具</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#cpio"><span class="nav-number">85.</span> <span class="nav-text">cpio</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#sed"><span class="nav-number">86.</span> <span class="nav-text">sed</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#编辑命令"><span class="nav-number">86.1.</span> <span class="nav-text">编辑命令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed替换"><span class="nav-number">86.2.</span> <span class="nav-text">sed替换</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed-示例"><span class="nav-number">86.3.</span> <span class="nav-text">sed 示例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#sed高级"><span class="nav-number">86.4.</span> <span class="nav-text">sed高级</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#rpm"><span class="nav-number">87.</span> <span class="nav-text">rpm</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#rpm升级"><span class="nav-number">87.1.</span> <span class="nav-text">rpm升级</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#包查询"><span class="nav-number">87.2.</span> <span class="nav-text">包查询</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#包校验"><span class="nav-number">87.3.</span> <span class="nav-text">包校验</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#秘钥"><span class="nav-number">87.4.</span> <span class="nav-text">秘钥</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据库"><span class="nav-number">87.5.</span> <span class="nav-text">数据库</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#centos6-内核救援"><span class="nav-number">88.</span> <span class="nav-text">centos6 内核救援</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#yum"><span class="nav-number">89.</span> <span class="nav-text">yum</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#实验基于httpd搭建的yum服务器："><span class="nav-number">89.1.</span> <span class="nav-text">实验基于httpd搭建的yum服务器：</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#yum-调用文件路径："><span class="nav-number">89.2.</span> <span class="nav-text">yum 调用文件路径：`</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#源码编译"><span class="nav-number">89.3.</span> <span class="nav-text">源码编译</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#centos7-支持神奇目录："><span class="nav-number">90.</span> <span class="nav-text">centos7:支持神奇目录：</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#centos-防火墙"><span class="nav-number">91.</span> <span class="nav-text">centos 防火墙</span></a></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">panxiaohu</span>

  

  
</div>




  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a> v3.7.1</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a class="theme-link" target="_blank" href="https://theme-next.org">NexT.Gemini</a> v6.4.0</div>




<div class="theme-info">
  <div class="powered-by"></div>
  <span class="post-count">博客全站共56.3k字</span>
</div>

<div id="days"></div>
</script>
<script language="javascript">
function show_date_time(){
window.setTimeout("show_date_time()", 1000);
BirthDay=new Date("09/02/2018 02:11:00");//月，日，年，小时，分钟，秒
today=new Date();
timeold=(today.getTime()-BirthDay.getTime());
sectimeold=timeold/1000
secondsold=Math.floor(sectimeold);
msPerDay=24*60*60*1000
e_daysold=timeold/msPerDay
daysold=Math.floor(e_daysold);
e_hrsold=(e_daysold-daysold)*24;
hrsold=setzero(Math.floor(e_hrsold));
e_minsold=(e_hrsold-hrsold)*60;
minsold=setzero(Math.floor((e_hrsold-hrsold)*60));
seconds=setzero(Math.floor((e_minsold-minsold)*60));
document.getElementById('days').innerHTML="已运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒";
// span_dt_dt.innerHTML="已运行"+daysold+"天"+hrsold+"小时"+minsold+"分"+seconds+"秒";
}
function setzero(i){
if (i<10)
{i="0" + i};
return i;
}
show_date_time();
</script>
        
<div class="busuanzi-count">
  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv" title="Total Visitors">
      <i class="fa fa-user"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="site-pv" title="Total Views">
      <i class="fa fa-eye"></i>
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    
	
    

    
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  













  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=6.4.0"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=6.4.0"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=6.4.0"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=6.4.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=6.4.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=6.4.0"></script>



  



  








  <script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script>
  
  
  <script src="//unpkg.com/valine/dist/Valine.min.js"></script>
  
  <script type="text/javascript">
    var GUEST = ['nick','mail','link'];
    var guest = 'nick,mail,link';
    guest = guest.split(',').filter(function (item) {
      return GUEST.indexOf(item)>-1;
    });
    new Valine({
        el: '#comments' ,
        verify: false,
        notify: false,
        appId: 'OSdVe8DIEP8hGQHk01ktuvca-gzGzoHsz',
        appKey: 'KqV97J1jQqvbF0Y6rh8SU3uo',
        placeholder: 'Just go go',
        avatar:'mm',
        meta:guest,
        pageSize:'10' || 10,
        visitor: false
    });
  </script>



  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  
  

  

  

  

  

  


<!-- 代码块复制功能 -->
<script type="text/javascript" src="/js/src/clipboard.min.js"></script>  
<script type="text/javascript" src="/js/src/clipboard-use.js"></script>

</body>
</html>